<?xml version="1.0" encoding="UTF-8"?>
<APC_DDF xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="http://localhost/ddf_schema/apc_ddf_1_6.xsd" ddfid="StreamUPS_BMS" ddfname="StreamUPS BMS" ddfversion="1" canremove="yes">
	<schemaVersion>1.6</schemaVersion>
	<device deviceid="CustomFromBMS_BMS">
		<setProductData ruleid="vendordata" field="vendor">Custom From BMS</setProductData>
		<setProductData ruleid="modeldata" field="model">BMS</setProductData>
		<setProductData ruleid="typedata" field="type">UPS</setProductData>
		<numSensor ruleid="cmd_dh1-a1-ups-1_batt1_volt">
			<type>num</type>
			<units />
			<sensorId>_CMD_DH1-A1-UPS-1_BATT1_VOLT</sensorId>
			<value>
				<mult>
					<op>
						<getOid>Function_3_Reg_1</getOid>
					</op>
					<op>1</op>
				</mult>
			</value>
			<label>Cmd_dh1-a1-ups-1_batt1_volt</label>
			<sensorSet>General</sensorSet>
		</numSensor>
		<numSensor ruleid="cmd_dh1-a1-ups-1_batt2_volt">
			<type>num</type>
			<units />
			<sensorId>_CMD_DH1-A1-UPS-1_BATT2_VOLT</sensorId>
			<value>
				<mult>
					<op>
						<getOid>Function_3_Reg_2</getOid>
					</op>
					<op>1</op>
				</mult>
			</value>
			<label>Cmd_dh1-a1-ups-1_batt2_volt</label>
			<sensorSet>General</sensorSet>
		</numSensor>
		<numSensor ruleid="cmd_dh1-a1-ups-1_kva_total">
			<type>num</type>
			<units />
			<sensorId>_CMD_DH1-A1-UPS-1_KVA_TOTAL</sensorId>
			<value>
				<mult>
					<op>
						<getOid>Function_3_Reg_3</getOid>
					</op>
					<op>1</op>
				</mult>
			</value>
			<label>Cmd_dh1-a1-ups-1_kva_total</label>
			<sensorSet>General</sensorSet>
		</numSensor>
		<numSensor ruleid="cmd_dh1-a1-ups-1_kw_total">
			<type>num</type>
			<units />
			<sensorId>_CMD_DH1-A1-UPS-1_KW_TOTAL</sensorId>
			<value>
				<mult>
					<op>
						<getOid>Function_3_Reg_4</getOid>
					</op>
					<op>1</op>
				</mult>
			</value>
			<label>Cmd_dh1-a1-ups-1_kw_total</label>
			<sensorSet>General</sensorSet>
		</numSensor>
		<numSensor ruleid="cmd_dh1-a1-ups-1_load_amps_a">
			<type>num</type>
			<units />
			<sensorId>_CMD_DH1-A1-UPS-1_LOAD_AMPS_A</sensorId>
			<value>
				<mult>
					<op>
						<getOid>Function_3_Reg_5</getOid>
					</op>
					<op>1</op>
				</mult>
			</value>
			<label>Cmd_dh1-a1-ups-1_load_amps_a</label>
			<sensorSet>General</sensorSet>
		</numSensor>
		<numSensor ruleid="cmd_dh1-a1-ups-1_load_amps_b">
			<type>num</type>
			<units />
			<sensorId>_CMD_DH1-A1-UPS-1_LOAD_AMPS_B</sensorId>
			<value>
				<mult>
					<op>
						<getOid>Function_3_Reg_6</getOid>
					</op>
					<op>1</op>
				</mult>
			</value>
			<label>Cmd_dh1-a1-ups-1_load_amps_b</label>
			<sensorSet>General</sensorSet>
		</numSensor>
		<numSensor ruleid="cmd_dh1-a1-ups-1_load_amps_c">
			<type>num</type>
			<units />
			<sensorId>_CMD_DH1-A1-UPS-1_LOAD_AMPS_C</sensorId>
			<value>
				<mult>
					<op>
						<getOid>Function_3_Reg_7</getOid>
					</op>
					<op>1</op>
				</mult>
			</value>
			<label>Cmd_dh1-a1-ups-1_load_amps_c</label>
			<sensorSet>General</sensorSet>
		</numSensor>
		<numSensor ruleid="cmd_dh1-a1-ups-1_op_on_batt">
			<type>num</type>
			<units />
			<sensorId>_CMD_DH1-A1-UPS-1_OP_ON_BATT</sensorId>
			<value>
				<mult>
					<op>
						<getOid>Function_3_Reg_8</getOid>
					</op>
					<op>1</op>
				</mult>
			</value>
			<label>Cmd_dh1-a1-ups-1_op_on_batt</label>
			<sensorSet>General</sensorSet>
		</numSensor>
		<numSensor ruleid="cmd_dh1-a1-ups-1_l1_pwr_factor">
			<type>num</type>
			<units />
			<sensorId>_CMD_DH1-A1-UPS-1_L1_PWR_FACTOR</sensorId>
			<value>
				<mult>
					<op>
						<getOid>Function_3_Reg_9</getOid>
					</op>
					<op>1</op>
				</mult>
			</value>
			<label>Cmd_dh1-a1-ups-1_l1_pwr_factor</label>
			<sensorSet>General</sensorSet>
		</numSensor>
		<numSensor ruleid="cmd_dh1-a1-ups-1_l2_pwr_factor">
			<type>num</type>
			<units />
			<sensorId>_CMD_DH1-A1-UPS-1_L2_PWR_FACTOR</sensorId>
			<value>
				<mult>
					<op>
						<getOid>Function_3_Reg_10</getOid>
					</op>
					<op>1</op>
				</mult>
			</value>
			<label>Cmd_dh1-a1-ups-1_l2_pwr_factor</label>
			<sensorSet>General</sensorSet>
		</numSensor>
		<numSensor ruleid="cmd_dh1-a1-ups-1_l3_pwr_factor">
			<type>num</type>
			<units />
			<sensorId>_CMD_DH1-A1-UPS-1_L3_PWR_FACTOR</sensorId>
			<value>
				<mult>
					<op>
						<getOid>Function_3_Reg_11</getOid>
					</op>
					<op>1</op>
				</mult>
			</value>
			<label>Cmd_dh1-a1-ups-1_l3_pwr_factor</label>
			<sensorSet>General</sensorSet>
		</numSensor>
		<stateSensor ruleid="cmd_dh1-a1-ups-1_sys_not_norm">
			<type>state</type>
			<sensorId>_CMD_DH1-A1-UPS-1_SYS_NOT_NORM</sensorId>
			<value>
				<mapValue mapid="binary_valuemap">
					<getOid>Function_3_Reg_12</getOid>
				</mapValue>
			</value>
			<label>Cmd_dh1-a1-ups-1_sys_not_norm</label>
			<enum>yes_no_enum</enum>
			<sensorSet>General</sensorSet>
		</stateSensor>
		<stateSensor ruleid="cmd_dh1-a1-ups-1_batt_cond_good">
			<type>state</type>
			<sensorId>_CMD_DH1-A1-UPS-1_BATT_COND_GOOD</sensorId>
			<value>
				<mapValue mapid="binary_valuemap">
					<getOid>Function_3_Reg_13</getOid>
				</mapValue>
			</value>
			<label>Cmd_dh1-a1-ups-1_batt_cond_good</label>
			<enum>yes_no_enum</enum>
			<sensorSet>General</sensorSet>
		</stateSensor>
		<stateSensor ruleid="cmd_dh1-a1-ups-1_batt_status_ok">
			<type>state</type>
			<sensorId>_CMD_DH1-A1-UPS-1_BATT_STATUS_OK</sensorId>
			<value>
				<mapValue mapid="binary_valuemap">
					<getOid>Function_3_Reg_14</getOid>
				</mapValue>
			</value>
			<label>Cmd_dh1-a1-ups-1_batt_status_ok</label>
			<enum>yes_no_enum</enum>
			<sensorSet>General</sensorSet>
		</stateSensor>

		<valueMap ruleid="binary_valuemap">
			<valueIn>0</valueIn>
			<valueOut>0</valueOut>
			<valueIn>1</valueIn>
			<valueOut>1</valueOut>
			<valueIn>*</valueIn>
			<valueOut>0</valueOut>
		</valueMap>

		<enumMap ruleid="yes_no_enum">
			<label>No</label>
			<label>Yes</label>
		</enumMap>
		<oidMustExist ruleid="modbusdevicetest" oid="MODBUS_OID_MUST_EXIST" />
	</device>
	<protocol>
		<modbus>
			<value_ref_id valid="Function_3_Reg_1">
				<function>3</function>
				<start_addr>0</start_addr>
				<quantity>1</quantity>
				<type>uint_16</type>
			</value_ref_id>
			<value_ref_id valid="Function_3_Reg_2">
				<function>3</function>
				<start_addr>1</start_addr>
				<quantity>1</quantity>
				<type>uint_16</type>
			</value_ref_id>
			<value_ref_id valid="Function_3_Reg_3">
				<function>3</function>
				<start_addr>2</start_addr>
				<quantity>1</quantity>
				<type>uint_16</type>
			</value_ref_id>
			<value_ref_id valid="Function_3_Reg_4">
				<function>3</function>
				<start_addr>3</start_addr>
				<quantity>1</quantity>
				<type>uint_16</type>
			</value_ref_id>
			<value_ref_id valid="Function_3_Reg_5">
				<function>3</function>
				<start_addr>4</start_addr>
				<quantity>1</quantity>
				<type>uint_16</type>
			</value_ref_id>
			<value_ref_id valid="Function_3_Reg_6">
				<function>3</function>
				<start_addr>5</start_addr>
				<quantity>1</quantity>
				<type>uint_16</type>
			</value_ref_id>
			<value_ref_id valid="Function_3_Reg_7">
				<function>3</function>
				<start_addr>6</start_addr>
				<quantity>1</quantity>
				<type>uint_16</type>
			</value_ref_id>
			<value_ref_id valid="Function_3_Reg_8">
				<function>3</function>
				<start_addr>7</start_addr>
				<quantity>1</quantity>
				<type>uint_16</type>
			</value_ref_id>
			<value_ref_id valid="Function_3_Reg_9">
				<function>3</function>
				<start_addr>8</start_addr>
				<quantity>1</quantity>
				<type>uint_16</type>
			</value_ref_id>
			<value_ref_id valid="Function_3_Reg_10">
				<function>3</function>
				<start_addr>9</start_addr>
				<quantity>1</quantity>
				<type>uint_16</type>
			</value_ref_id>
			<value_ref_id valid="Function_3_Reg_11">
				<function>3</function>
				<start_addr>10</start_addr>
				<quantity>1</quantity>
				<type>uint_16</type>
			</value_ref_id>
			<value_ref_id valid="Function_3_Reg_12">
				<function>3</function>
				<start_addr>11</start_addr>
				<quantity>1</quantity>
				<type>uint_16</type>
			</value_ref_id>
			<value_ref_id valid="Function_3_Reg_13">
				<function>3</function>
				<start_addr>12</start_addr>
				<quantity>1</quantity>
				<type>uint_16</type>
			</value_ref_id>
			<value_ref_id valid="Function_3_Reg_14">
				<function>3</function>
				<start_addr>13</start_addr>
				<quantity>1</quantity>
				<type>uint_16</type>
			</value_ref_id>
		</modbus>
	</protocol>
</APC_DDF>
