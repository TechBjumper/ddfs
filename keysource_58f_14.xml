<?xml version="1.0"?>
<APC_DDF 
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
	xsi:noNamespaceSchemaLocation="http://localhost/ddf_schema/apc_ddf_1_6.xsd"
    ddfid="keysource_58f_14" 
	ddfname="KeySource 58F-14" 
	ddfversion="1" 
	canremove="yes">
  <schemaVersion>1.6</schemaVersion>

  <device deviceid="keysource_58f_14">
    <oidMustExist ruleid="modbusdevicetest" oid="MODBUS_OID_MUST_EXIST"/>

    <setProductData ruleid="vendordata" field="vendor">Keysource</setProductData>
    <setProductData ruleid="modeldata" field="model">58F-14</setProductData>
    <setDefaultLabel ruleid="labeldata"><sysHostname/> - Slave <commSetting field="slaveaddress"/></setDefaultLabel>
	
	
	<stateSensor ruleid="ups_supply_closed_a01">
		<type>state</type>
		<sensorId>UPS_SUPPLY_CLOSED_A01</sensorId>
		<value>
			<mapValue mapid="ok_fault-vm">
				<getOid>UPS_SUPPLY_CLOSED_A01</getOid>
			</mapValue>
		</value>
		<label>UPS Supply Closed A01</label>
		<enum>ok_fault-em</enum>
		<sensorSet>A01</sensorSet>
	</stateSensor>
	<stateSensor ruleid="loadbank_supply_closed_a07">
		<type>state</type>
		<sensorId>LOADBANK_SUPPLY_CLOSED_A07</sensorId>
		<value>
			<mapValue mapid="ok_fault-vm">
				<getOid>LOADBANK_SUPPLY_CLOSED_A07</getOid>
			</mapValue>
		</value>
		<label>Loadbank Supply Closed A07</label>
		<enum>ok_fault-em</enum>
		<sensorSet>A07</sensorSet>
	</stateSensor>
	<stateSensor ruleid="loadbank_supply_tripped_a07">
		<type>state</type>
		<sensorId>LOADBANK_SUPPLY_TRIPPED_A07</sensorId>
		<value>
			<mapValue mapid="ok_fault-vm">
				<getOid>LOADBANK_SUPPLY_TRIPPED_A07</getOid>
			</mapValue>
		</value>
		<label>Loadbank Supply Tripped A07</label>
		<enum>ok_fault-em</enum>
		<sensorSet>A07</sensorSet>
	</stateSensor>
	<stateSensor ruleid="bypass_supply_closed_a08">
		<type>state</type>
		<sensorId>BYPASS_SUPPLY_CLOSED_A08</sensorId>
		<value>
			<mapValue mapid="ok_fault-vm">
				<getOid>BYPASS_SUPPLY_CLOSED_A08</getOid>
			</mapValue>
		</value>
		<label>Bypass Supply Closed A08</label>
		<enum>ok_fault-em</enum>
		<sensorSet>A08</sensorSet>
	</stateSensor>
	<stateSensor ruleid="outgoing_supply_closed_a09">
		<type>state</type>
		<sensorId>OUTGOING_SUPPLY_CLOSED_A09</sensorId>
		<value>
			<mapValue mapid="ok_fault-vm">
				<getOid>OUTGOING_SUPPLY_CLOSED_A09</getOid>
			</mapValue>
		</value>
		<label>Outgoing Supply Closed A09</label>
		<enum>ok_fault-em</enum>
		<sensorSet>A09</sensorSet>
	</stateSensor>
	<stateSensor ruleid="outgoing_supply_tripped_a09">
		<type>state</type>
		<sensorId>OUTGOING_SUPPLY_TRIPPED_A09</sensorId>
		<value>
			<mapValue mapid="ok_fault-vm">
				<getOid>OUTGOING_SUPPLY_TRIPPED_A09</getOid>
			</mapValue>
		</value>
		<label>Outgoing Supply Tripped A09</label>
		<enum>ok_fault-em</enum>
		<sensorSet>A09</sensorSet>
	</stateSensor>
	<stateSensor ruleid="outgoing_supply_closed_a10">
		<type>state</type>
		<sensorId>OUTGOING_SUPPLY_CLOSED_A10</sensorId>
		<value>
			<mapValue mapid="ok_fault-vm">
				<getOid>OUTGOING_SUPPLY_CLOSED_A10</getOid>
			</mapValue>
		</value>
		<label>Outgoing Supply Closed A10</label>
		<enum>ok_fault-em</enum>
		<sensorSet>A10</sensorSet>
	</stateSensor>
	<stateSensor ruleid="outgoing_supply_tripped_a10">
		<type>state</type>
		<sensorId>OUTGOING_SUPPLY_TRIPPED_A10</sensorId>
		<value>
			<mapValue mapid="ok_fault-vm">
				<getOid>OUTGOING_SUPPLY_TRIPPED_A10</getOid>
			</mapValue>
		</value>
		<label>Outgoing Supply Tripped A10</label>
		<enum>ok_fault-em</enum>
		<sensorSet>A10</sensorSet>
	</stateSensor>
	<stateSensor ruleid="outgoing_supply_closed_a11">
		<type>state</type>
		<sensorId>OUTGOING_SUPPLY_CLOSED_A11</sensorId>
		<value>
			<mapValue mapid="ok_fault-vm">
				<getOid>OUTGOING_SUPPLY_CLOSED_A11</getOid>
			</mapValue>
		</value>
		<label>Outgoing Supply Closed A11</label>
		<enum>ok_fault-em</enum>
		<sensorSet>A11</sensorSet>
	</stateSensor>
	<stateSensor ruleid="outgoing_supply_tripped_a11">
		<type>state</type>
		<sensorId>OUTGOING_SUPPLY_TRIPPED_A11</sensorId>
		<value>
			<mapValue mapid="ok_fault-vm">
				<getOid>OUTGOING_SUPPLY_TRIPPED_A11</getOid>
			</mapValue>
		</value>
		<label>Outgoing Supply Tripped A11</label>
		<enum>ok_fault-em</enum>
		<sensorSet>A11</sensorSet>
	</stateSensor>
	<stateSensor ruleid="outgoing_supply_closed_a12">
		<type>state</type>
		<sensorId>OUTGOING_SUPPLY_CLOSED_A12</sensorId>
		<value>
			<mapValue mapid="ok_fault-vm">
				<getOid>OUTGOING_SUPPLY_CLOSED_A12</getOid>
			</mapValue>
		</value>
		<label>Outgoing Supply Closed A12</label>
		<enum>ok_fault-em</enum>
		<sensorSet>A12</sensorSet>
	</stateSensor>
	<stateSensor ruleid="outgoing_supply_tripped_a12">
		<type>state</type>
		<sensorId>OUTGOING_SUPPLY_TRIPPED_A12</sensorId>
		<value>
			<mapValue mapid="ok_fault-vm">
				<getOid>OUTGOING_SUPPLY_TRIPPED_A12</getOid>
			</mapValue>
		</value>
		<label>Outgoing Supply Tripped A12</label>
		<enum>ok_fault-em</enum>
		<sensorSet>A12</sensorSet>
	</stateSensor>
	<stateSensor ruleid="outgoing_supply_closed_a13">
		<type>state</type>
		<sensorId>OUTGOING_SUPPLY_CLOSED_A13</sensorId>
		<value>
			<mapValue mapid="ok_fault-vm">
				<getOid>OUTGOING_SUPPLY_CLOSED_A13</getOid>
			</mapValue>
		</value>
		<label>Outgoing Supply Closed A13</label>
		<enum>ok_fault-em</enum>
		<sensorSet>A13</sensorSet>
	</stateSensor>
	<stateSensor ruleid="outgoing_supply_tripped_a13">
		<type>state</type>
		<sensorId>OUTGOING_SUPPLY_TRIPPED_A13</sensorId>
		<value>
			<mapValue mapid="ok_fault-vm">
				<getOid>OUTGOING_SUPPLY_TRIPPED_A13</getOid>
			</mapValue>
		</value>
		<label>Outgoing Supply Tripped A13</label>
		<enum>ok_fault-em</enum>
		<sensorSet>A13</sensorSet>
	</stateSensor>
	
	<!-- Value Maps -->
	
	<valueMap ruleid="ok_fault-vm">
		<valueIn>0</valueIn><valueOut>0</valueOut>
		<valueIn>1</valueIn><valueOut>1</valueOut>
		<valueIn>*</valueIn><valueOut>0</valueOut>
	</valueMap>

	<enumMap ruleid="ok_fault-em">
		<label>Ok</label>
		<label>Fault</label>
	</enumMap>

	<!-- -->
	
  </device>


  <protocol>
    <modbus>
      <value_ref_id valid="UPS_SUPPLY_CLOSED_A01">
        <function>3</function>
        <start_addr>1</start_addr>
        <quantity>1</quantity>
        <type>uint_16</type>
      </value_ref_id>
	  <value_ref_id valid="LOADBANK_SUPPLY_CLOSED_A07">
        <function>3</function>
        <start_addr>2</start_addr>
        <quantity>1</quantity>
        <type>uint_16</type>
      </value_ref_id>
	  <value_ref_id valid="LOADBANK_SUPPLY_TRIPPED_A07">
        <function>3</function>
        <start_addr>3</start_addr>
        <quantity>1</quantity>
        <type>uint_16</type>
      </value_ref_id>
	  <value_ref_id valid="BYPASS_SUPPLY_CLOSED_A08">
        <function>3</function>
        <start_addr>4</start_addr>
        <quantity>1</quantity>
        <type>uint_16</type>
      </value_ref_id>
	  <value_ref_id valid="OUTGOING_SUPPLY_CLOSED_A09">
        <function>3</function>
        <start_addr>5</start_addr>
        <quantity>1</quantity>
        <type>uint_16</type>
      </value_ref_id>
	  <value_ref_id valid="OUTGOING_SUPPLY_TRIPPED_A09">
        <function>3</function>
        <start_addr>6</start_addr>
        <quantity>1</quantity>
        <type>uint_16</type>
      </value_ref_id>
	  <value_ref_id valid="OUTGOING_SUPPLY_CLOSED_A10">
        <function>3</function>
        <start_addr>7</start_addr>
        <quantity>1</quantity>
        <type>uint_16</type>
      </value_ref_id>
	  <value_ref_id valid="OUTGOING_SUPPLY_TRIPPED_A10">
        <function>3</function>
        <start_addr>8</start_addr>
        <quantity>1</quantity>
        <type>uint_16</type>
      </value_ref_id>
	  <value_ref_id valid="OUTGOING_SUPPLY_CLOSED_A11">
        <function>3</function>
        <start_addr>9</start_addr>
        <quantity>1</quantity>
        <type>uint_16</type>
      </value_ref_id>
	  <value_ref_id valid="OUTGOING_SUPPLY_TRIPPED_A11">
        <function>3</function>
        <start_addr>10</start_addr>
        <quantity>1</quantity>
        <type>uint_16</type>
      </value_ref_id>
	  <value_ref_id valid="OUTGOING_SUPPLY_CLOSED_A12">
        <function>3</function>
        <start_addr>12</start_addr>
        <quantity>1</quantity>
        <type>uint_16</type>
      </value_ref_id>
	  <value_ref_id valid="OUTGOING_SUPPLY_TRIPPED_A12">
        <function>3</function>
        <start_addr>13</start_addr>
        <quantity>1</quantity>
        <type>uint_16</type>
      </value_ref_id>
	  <value_ref_id valid="OUTGOING_SUPPLY_CLOSED_A13">
        <function>3</function>
        <start_addr>14</start_addr>
        <quantity>1</quantity>
        <type>uint_16</type>
      </value_ref_id>
	  <value_ref_id valid="OUTGOING_SUPPLY_TRIPPED_A13">
        <function>3</function>
        <start_addr>15</start_addr>
        <quantity>1</quantity>
        <type>uint_16</type>
      </value_ref_id>
     </modbus>
  </protocol>
</APC_DDF>
