<?xml version="1.0"?>
<!-- Test Modbus related information -->
<APC_DDF
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xsi:noNamespaceSchemaLocation="http://localhost/ddf_schema/apc_ddf_1_6.xsd"
	ddfid="generac_generator_gpanel"
	ddfname="Generac Generator (MPS Control Panel)"
	ddfversion="3"
	canremove="yes">
  <schemaVersion>1.6</schemaVersion>

  <device deviceid="generac_generator">
      <oidMustExist ruleid="modbusdevicetest" oid="MODBUS_OID_MUST_EXIST"/>

      <setProductData ruleid="vendordata" field="vendor">Generac</setProductData>
      <setProductData ruleid="modeldata" field="model">MPS Digital Control Panel</setProductData>
      <setProductData ruleid="typedata" field="type">Generator</setProductData>

      <setDefaultLabel ruleid="labeldata"><sysHostname/> - Slave <commSetting field="slaveaddress"/></setDefaultLabel>
      
		<numSensor ruleid="oiltemp">
			<type>temp</type>
			<sensorId>OILTEMP</sensorId>
			<value>
				<getOid>oiltemp</getOid>
			</value>
			<label>Oil Temperature</label>
			<sensorSet>Generator Sensors</sensorSet>
		</numSensor>
		<numSensor ruleid="coolanttemp">
			<type>temp</type>
			<sensorId>COOLANTTEMP</sensorId>
			<value>
				<getOid>coolanttemp</getOid>
			</value>
			<label>Coolant Temperature</label>
			<sensorSet>Generator Sensors</sensorSet>
		</numSensor>
		<numSensor ruleid="oilpressure">
			<type>pressure</type>
			<sensorId>OILPRESSURE</sensorId>
			<value>
				<getOid>oilpressure</getOid>
			</value>
			<label>Oil Pressure</label>
			<sensorSet>Generator Sensors</sensorSet>
		</numSensor>
		<numSensor ruleid="coolantlevel">
			<type>pctofcapacity</type>
			<sensorId>COOLANTLEVEL</sensorId>
			<value>
				<getOid>coolantlevel</getOid>
			</value>
			<label>Coolant Level</label>
			<sensorSet>Generator Sensors</sensorSet>
		</numSensor>
		<numSensor ruleid="fuellevel">
			<type>pctofcapacity</type>
			<sensorId>FUELLEVEL</sensorId>
			<value>
				<getOid>fuellevel</getOid>
			</value>
			<label>Fuel Level</label>
			<sensorSet>Generator Sensors</sensorSet>
		</numSensor>

		<numSensor ruleid="battcurrent">
			<type>amperage</type>
			<sensorId>BATTCURRENT</sensorId>
			<value>
				<getOid>battcurrent</getOid>
			</value>
			<label>Battery Charge Current</label>
			<sensorSet>Generator Sensors</sensorSet>
		</numSensor>
		<numSensor ruleid="battvoltage">
			<type>voltage</type>
			<sensorId>BATTVOLTAGE</sensorId>
			<value>
				<getOid>battvoltage</getOid>
			</value>
			<label>Battery Voltage</label>
			<sensorSet>Generator Sensors</sensorSet>
		</numSensor>
      
      <numSensor ruleid="gen_0_current_a">
          <type>amperage</type>
          <sensorId>GEN0_CURRENT_1</sensorId>
          <value>
              <getOid>gencurrenta</getOid>
          </value>
          <label>Generator Current Phase A</label>
          <sensorSet>Generator Sensors</sensorSet>
      </numSensor>

      <numSensor ruleid="gen_0_current_b">
          <type>amperage</type>
          <sensorId>GEN0_CURRENT_2</sensorId>
          <value>
              <getOid>gencurrentb</getOid>
          </value>
          <label>Generator Current Phase B</label>
          <sensorSet>Generator Sensors</sensorSet>
      </numSensor>

      <numSensor ruleid="gen_0_current_c">
          <type>amperage</type>
          <sensorId>GEN0_CURRENT_3</sensorId>
          <value>
              <getOid>gencurrentc</getOid>
          </value>
          <label>Generator Current Phase C</label>
          <sensorSet>Generator Sensors</sensorSet>
      </numSensor>
      <numSensor ruleid="gen_0_current_avg">
          <type>amperage</type>
          <sensorId>GEN0_CURRENT_AVG</sensorId>
          <value>
              <getOid>gencurrentavg</getOid>
          </value>
          <label>Generator Current Average</label>
          <sensorSet>Generator Sensors</sensorSet>
      </numSensor>

      <numSensor ruleid="gen_0_voltage_ab">
          <type>voltage</type>
          <sensorId>GEN0_VOLTAGE_LL_1</sensorId>
          <value>
              <getOid>genvoltageab</getOid>
          </value>
          <label>Generator Voltage Phase A-B</label>
          <sensorSet>Generator Sensors</sensorSet>
      </numSensor>

      <numSensor ruleid="gen_0_voltage_bc">
          <type>voltage</type>
          <sensorId>GEN0_VOLTAGE_LL_2</sensorId>
          <value>
              <getOid>genvoltagebc</getOid>
          </value>
          <label>Generator Voltage Phase B-C</label>
          <sensorSet>Generator Sensors</sensorSet>
      </numSensor>

      <numSensor ruleid="gen_0_voltage_ca">
          <type>voltage</type>
          <sensorId>GEN0_VOLTAGE_LL_3</sensorId>
          <value>
              <getOid>genvoltageca</getOid>
          </value>
          <label>Generator Voltage Phase C-A</label>
          <sensorSet>Generator Sensors</sensorSet>
      </numSensor>
      <numSensor ruleid="gen_0_voltage_avg">
          <type>voltage</type>
          <sensorId>GEN0_VOLTAGE_AVG</sensorId>
          <value>
              <getOid>genvoltageavg</getOid>
          </value>
          <label>Generator Voltage Average</label>
          <sensorSet>Generator Sensors</sensorSet>
      </numSensor>

      <numSensor ruleid="bus_current_a">
          <type>amperage</type>
          <sensorId>BUS_CURRENT_1</sensorId>
          <value>
              <getOid>buscurrenta</getOid>
          </value>
          <label>Bus Current Phase A</label>
          <sensorSet>Bus Sensors</sensorSet>
      </numSensor>
      <numSensor ruleid="bus_current_b">
          <type>amperage</type>
          <sensorId>BUS_CURRENT_2</sensorId>
          <value>
              <getOid>buscurrentb</getOid>
          </value>
          <label>Bus Current Phase B</label>
          <sensorSet>Bus Sensors</sensorSet>
      </numSensor>
      <numSensor ruleid="bus_current_c">
          <type>amperage</type>
          <sensorId>BUS_CURRENT_3</sensorId>
          <value>
              <getOid>buscurrentc</getOid>
          </value>
          <label>Bus Current Phase C</label>
          <sensorSet>Bus Sensors</sensorSet>
      </numSensor>
      <numSensor ruleid="bus_current_avg">
          <type>amperage</type>
          <sensorId>BUS_CURRENT_AVG</sensorId>
          <value>
              <getOid>buscurrentavg</getOid>
          </value>
          <label>Bus Current Average</label>
          <sensorSet>Bus Sensors</sensorSet>
      </numSensor>

      <numSensor ruleid="bus_voltage_ab">
          <type>voltage</type>
          <sensorId>BUS_VOLTAGE_LL_1</sensorId>
          <value>
              <getOid>busvoltageab</getOid>
          </value>
          <label>Bus Voltage Phase A-B</label>
          <sensorSet>Bus Sensors</sensorSet>
      </numSensor>
      <numSensor ruleid="bus_voltage_bc">
          <type>voltage</type>
          <sensorId>BUS_VOLTAGE_LL_2</sensorId>
          <value>
              <getOid>busvoltagebc</getOid>
          </value>
          <label>Bus Voltage Phase B-C</label>
          <sensorSet>Bus Sensors</sensorSet>
      </numSensor>
      <numSensor ruleid="bus_voltage_ca">
          <type>voltage</type>
          <sensorId>BUS_VOLTAGE_LL_3</sensorId>
          <value>
              <getOid>busvoltageca</getOid>
          </value>
          <label>Bus Voltage Phase C-A</label>
          <sensorSet>Bus Sensors</sensorSet>
      </numSensor>
      <numSensor ruleid="bus_voltage_avg">
          <type>voltage</type>
          <sensorId>BUS_VOLTAGE_AVG</sensorId>
          <value>
              <getOid>busvoltageavg</getOid>
          </value>
          <label>Bus Voltage Average</label>
          <sensorSet>Bus Sensors</sensorSet>
      </numSensor>

      <numSensor ruleid="gentotalkw">
          <type>num/powerKW</type>
          <sensorId>GENTOTALKW</sensorId>
          <value>
              <getOid>gentotalkw</getOid>
          </value>
          <label>Generator Total Real Power</label>
          <sensorSet>Generator Sensors</sensorSet>
      </numSensor>
      <numSensor ruleid="bustotalkw">
          <type>num/powerKW</type>
          <sensorId>BUSTOTALKW</sensorId>
          <value>
              <getOid>bustotalkw</getOid>
          </value>
          <label>Bus Total Real Power</label>
          <sensorSet>Bus Sensors</sensorSet>
      </numSensor>

      <numSensor ruleid="gentotalpf">
          <type>num/powerfactor</type>
          <sensorId>GENTOTALPF</sensorId>
          <value>
              <getOid>gentotalpf</getOid>
          </value>
          <label>Generator Total Power Factor</label>
          <sensorSet>Generator Sensors</sensorSet>
      </numSensor>
      <numSensor ruleid="bustotalpf">
          <type>num/powerfactor</type>
          <sensorId>BUSTOTALPF</sensorId>
          <value>
              <getOid>bustotalpf</getOid>
          </value>
          <label>Bus Total Power Factor</label>
          <sensorSet>Bus Sensors</sensorSet>
      </numSensor>

      <numSensor ruleid="genfreq">
          <type>frequency</type>
          <sensorId>GENFREQ</sensorId>
          <value>
              <getOid>genfreq</getOid>
          </value>
          <label>Generator Frequency</label>
          <sensorSet>Generator Sensors</sensorSet>
      </numSensor>
      <numSensor ruleid="busfreq">
          <type>frequency</type>
          <sensorId>BUSFREQ</sensorId>
          <value>
              <getOid>busfreq</getOid>
          </value>
          <label>Bus Frequency</label>
          <sensorSet>Bus Sensors</sensorSet>
      </numSensor>

      <numSensor ruleid="enginerpm">
          <type>num</type>
          <units>rpm</units>
          <sensorId>ENGINERPM</sensorId>
          <value>
              <getOid>enginerpm</getOid>
          </value>
          <label>Engine RPM</label>
          <sensorSet>Generator Sensors</sensorSet>
      </numSensor>

		<!--
      <stateSensor ruleid="gen_0_oil_press_state">
          <type>state</type>
          <sensorId>GEN0_OIL_PRESS_STATE</sensorId>
          <value>
              <mapValue mapid="oilpressstate_valuemap">
                  <formatNumber>
                      <bitwise_and>
                          <op><getOid>genalarmcond0</getOid></op>
                          <op>12288</op>
                      </bitwise_and>
                  </formatNumber>
              </mapValue>
          </value>
          <label>Generator Oil Pressure State</label>
          <enum>warncritstate_enummap</enum>
          <sensorSet>Generator Sensors</sensorSet>
      </stateSensor>

      <valueMap ruleid="oilpressstate_valuemap">
          <valueIn>4096</valueIn>  <valueOut>2</valueOut>
          <valueIn>8192</valueIn>  <valueOut>1</valueOut>
          <valueIn>*</valueIn>     <valueOut>0</valueOut>
      </valueMap>

      <stateSensor ruleid="gen_0_cool_temp_state">
          <type>state</type>
          <sensorId>GEN0_COOL_TEMP_STATE</sensorId>
          <value>
              <mapValue mapid="cooltempstate_valuemap">
                  <formatNumber>
                      <bitwise_and>
                          <op><getOid>genalarmcond0</getOid></op>
                          <op>3584</op> 
                      </bitwise_and>
                  </formatNumber>
              </mapValue>
          </value>
          <label>Generator Coolant Temperature State</label>
          <enum>lowhighhighstate_enummap</enum>
          <sensorSet>Generator Sensors</sensorSet>
      </stateSensor>

      <valueMap ruleid="cooltempstate_valuemap">
          <valueIn>1024</valueIn>  <valueOut>3</valueOut>
          <valueIn>2048</valueIn>  <valueOut>2</valueOut>
          <valueIn>512</valueIn>   <valueOut>1</valueOut>
          <valueIn>*</valueIn>     <valueOut>0</valueOut>
      </valueMap>

      <stateSensor ruleid="gen_0_oil_temp_state">
          <type>state</type>
          <sensorId>GEN0_OIL_TEMP_STATE</sensorId>
          <value>
              <mapValue mapid="oiltempstate_valuemap">
                  <formatNumber>
                      <bitwise_and>
                          <op><getOid>genalarmcond0</getOid></op>
                          <op>384</op> 
                      </bitwise_and>
                  </formatNumber>
              </mapValue>
          </value>
          <label>Generator Oil Temperature State</label>
          <enum>warncritstate_enummap</enum>
          <sensorSet>Generator Sensors</sensorSet>
      </stateSensor>

      <valueMap ruleid="oiltempstate_valuemap">
          <valueIn>128</valueIn>  <valueOut>2</valueOut>
          <valueIn>256</valueIn>  <valueOut>1</valueOut>
          <valueIn>*</valueIn>     <valueOut>0</valueOut>
      </valueMap>

      <stateSensor ruleid="gen_0_batt_volt_state">
          <type>state</type>
          <sensorId>GEN0_BATT_VOLT_STATE</sensorId>
          <value>
              <mapValue mapid="battvoltstate_valuemap">
                  <formatNumber>
                      <bitwise_and>
                          <op><getOid>genalarmcond0</getOid></op>
                          <op>96</op> 
                      </bitwise_and>
                  </formatNumber>
              </mapValue>
          </value>
          <label>Generator Battery Voltage State</label>
          <enum>lowhighstate_enummap</enum>
          <sensorSet>Generator Sensors</sensorSet>
      </stateSensor>

      <valueMap ruleid="battvoltstate_valuemap">
          <valueIn>32</valueIn>  <valueOut>2</valueOut>
          <valueIn>64</valueIn>  <valueOut>1</valueOut>
          <valueIn>*</valueIn>     <valueOut>0</valueOut>
      </valueMap>

      <stateSensor ruleid="gen_0_fuel_level_state">
          <type>state</type>
          <sensorId>GEN0_FUEL_LEVEL_STATE</sensorId>
          <value>
              <mapValue mapid="fuellevelstate_valuemap">
                  <formatNumber>
                      <bitwise_and>
                          <op><getOid>genalarmcond1</getOid></op>
                          <op>12288</op> 
                      </bitwise_and>
                  </formatNumber>
              </mapValue>
          </value>
          <label>Generator Fuel Level State</label>
          <enum>lowemptystate_enummap</enum>
          <sensorSet>Generator Sensors</sensorSet>
      </stateSensor>

      <valueMap ruleid="fuellevelstate_valuemap">
          <valueIn>4096</valueIn>  <valueOut>2</valueOut>
          <valueIn>8192</valueIn>  <valueOut>1</valueOut>
          <valueIn>*</valueIn>     <valueOut>0</valueOut>
      </valueMap>

      <stateSensor ruleid="gen_0_cool_level_state">
          <type>state</type>
          <sensorId>GEN0_COOL_LEVEL_STATE</sensorId>
          <value>
              <mapValue mapid="coollevelstate_valuemap">
                  <formatNumber>
                      <bitwise_and>
                          <op><getOid>genalarmcond1</getOid></op>
                          <op>1024</op> 
                      </bitwise_and>
                  </formatNumber>
              </mapValue>
          </value>
          <label>Generator Coolant Level State</label>
          <enum>lowstate_enummap</enum>
          <sensorSet>Generator Sensors</sensorSet>
      </stateSensor>

      <valueMap ruleid="coollevelstate_valuemap">
          <valueIn>1024</valueIn>  <valueOut>1</valueOut>
          <valueIn>*</valueIn>     <valueOut>0</valueOut>
      </valueMap>
      
      
      <enumMap ruleid="warncritstate_enummap">
          <label>Ok</label>
          <label>Warning</label>
          <label>Critical</label>
      </enumMap>
      
      <enumMap ruleid="lowhighhighstate_enummap">
          <label>Ok</label>
          <label>Low</label>
          <label>High Warning</label>
          <label>High Alarm</label>
      </enumMap>
      
      <enumMap ruleid="lowhighstate_enummap">
          <label>Ok</label>
          <label>Low</label>
          <label>High</label>
      </enumMap>
      
      <enumMap ruleid="lowemptystate_enummap">
          <label>Ok</label>
          <label>Low</label>
          <label>Empty</label>
      </enumMap>
      
      <enumMap ruleid="lowstate_enummap">
          <label>Ok</label>
          <label>Low</label>
      </enumMap>
		-->


      <alarmFlags ruleid="alarmconds_0">
          <value><getOid>genalarmcond0</getOid></value>
          
          <alarmFlagsTest mask="8000" match="8000" log="no">
              <name>
                  <activeText>Common Alarm</activeText>
                  <inactiveText>Common Alarm Cleared</inactiveText>
              </name>
              <severity>critical</severity>
              <category>Output</category>
              <description>
                  <activeText>The system has detected a Common Alarm condition.</activeText>
                  <inactiveText>The Common Alarm condition has been cleared.</inactiveText>
              </description>
          </alarmFlagsTest>
          <alarmFlagsTest mask="4000" match="4000" log="no">
              <name>
                  <activeText>Common Warning</activeText>
                  <inactiveText>Common Warning Cleared</inactiveText>
              </name>
              <severity>warning</severity>
              <category>Output</category>
              <description>
                  <activeText>The system has detected a Common Warning condition.</activeText>
                  <inactiveText>The Common Warning condition has been cleared.</inactiveText>
              </description>
          </alarmFlagsTest>
          
          <alarmFlagsTest mask="2000" match="2000" log="no">
              <name>
                  <activeText>Low Oil Pressure Warning</activeText>
                  <inactiveText>Low Oil Pressure Warning Cleared</inactiveText>
              </name>
              <severity>warning</severity>
              <category>Output</category>
              <description>
                  <activeText>The system has detected a Low Oil Pressure Warning condition.</activeText>
                  <inactiveText>The Low Oil Pressure Warning condition has been cleared.</inactiveText>
              </description>
          </alarmFlagsTest>
          <alarmFlagsTest mask="1000" match="1000" log="no">
              <name>
                  <activeText>Low Oil Pressure Alarm</activeText>
                  <inactiveText>Low Oil Pressure Alarm Cleared</inactiveText>
              </name>
              <severity>error</severity>
              <category>Output</category>
              <description>
                  <activeText>The system has detected a Low Oil Pressure Alarm condition.</activeText>
                  <inactiveText>The Low Oil Pressure Alarm condition has been cleared.</inactiveText>
              </description>
          </alarmFlagsTest>
          <alarmFlagsTest mask="800" match="800" log="no">
              <name>
                  <activeText>High Coolant Temperature Warning</activeText>
                  <inactiveText>High Coolant Temperature Warning Cleared</inactiveText>
              </name>
              <severity>warning</severity>
              <category>Output</category>
              <description>
                  <activeText>The system has detected a High Coolant Temperature Warning condition.</activeText>
                  <inactiveText>The High Coolant Temperature Warning condition has been cleared.</inactiveText>
              </description>
          </alarmFlagsTest>
          <alarmFlagsTest mask="400" match="400" log="no">
              <name>
                  <activeText>High Coolant Temperature Alarm</activeText>
                  <inactiveText>High Coolant Temperature Alarm Cleared</inactiveText>
              </name>
              <severity>error</severity>
              <category>Output</category>
              <description>
                  <activeText>The system has detected a High Coolant Temperature Alarm condition.</activeText>
                  <inactiveText>The High Coolant Temperature Alarm condition has been cleared.</inactiveText>
              </description>
          </alarmFlagsTest>
          
          <!-- Customer did not specify - omit
          <alarmFlagsTest mask="200" match="200" log="no">
              <name>
                  <activeText>Low Coolant Temperature Warning</activeText>
                  <inactiveText>Low Coolant Temperature Warning Cleared</inactiveText>
              </name>
              <severity>warning</severity>
              <category>Output</category>
              <description>
                  <activeText>The system has detected a Low Coolant Temperature Warning condition.</activeText>
                  <inactiveText>The Low Coolant Temperature Warning condition has been cleared.</inactiveText>
              </description>
          </alarmFlagsTest>
          -->
          
          <alarmFlagsTest mask="100" match="100" log="no">
              <name>
                  <activeText>High Oil Temperature Warning</activeText>
                  <inactiveText>High Oil Temperature Warning Cleared</inactiveText>
              </name>
              <severity>warning</severity>
              <category>Output</category>
              <description>
                  <activeText>The system has detected a High Oil Temperature Warning condition.</activeText>
                  <inactiveText>The High Oil Temperature Warning condition has been cleared.</inactiveText>
              </description>
          </alarmFlagsTest>
          <alarmFlagsTest mask="80" match="80" log="no">
              <name>
                  <activeText>High Oil Temperature Alarm</activeText>
                  <inactiveText>High Oil Temperature Alarm Cleared</inactiveText>
              </name>
              <severity>error</severity>
              <category>Output</category>
              <description>
                  <activeText>The system has detected a High Oil Temperature Alarm condition.</activeText>
                  <inactiveText>The High Oil Temperature Alarm condition has been cleared.</inactiveText>
              </description>
          </alarmFlagsTest>
          <alarmFlagsTest mask="40" match="40" log="no">
              <name>
                  <activeText>Low Battery Voltage Warning</activeText>
                  <inactiveText>Low Battery Voltage Warning Cleared</inactiveText>
              </name>
              <severity>warning</severity>
              <category>Output</category>
              <description>
                  <activeText>The system has detected a Low Battery Voltage Warning condition.</activeText>
                  <inactiveText>The Low Battery Voltage Warning condition has been cleared.</inactiveText>
              </description>
          </alarmFlagsTest>
          <alarmFlagsTest mask="20" match="20" log="no">
              <name>
                  <activeText>High Battery Voltage Warning</activeText>
                  <inactiveText>High Battery Voltage Warning Cleared</inactiveText>
              </name>
              <severity>warning</severity>
              <category>Output</category>
              <description>
                  <activeText>The system has detected a High Battery Voltage Warning condition.</activeText>
                  <inactiveText>The High Battery Voltage Warning condition has been cleared.</inactiveText>
              </description>
          </alarmFlagsTest>
          
          <alarmFlagsTest mask="10" match="10" log="no">
              <name>
                  <activeText>Overspeed Warning</activeText>
                  <inactiveText>Overspeed Warning Cleared</inactiveText>
              </name>
              <severity>warning</severity>
              <category>Output</category>
              <description>
                  <activeText>The system has detected an Overspeed Warning condition.</activeText>
                  <inactiveText>The Overspeed Warning condition has been cleared.</inactiveText>
              </description>
          </alarmFlagsTest>
          <alarmFlagsTest mask="8" match="8" log="no">
              <name>
                  <activeText>Underspeed Warning</activeText>
                  <inactiveText>Underspeed Warning Cleared</inactiveText>
              </name>
              <severity>warning</severity>
              <category>Output</category>
              <description>
                  <activeText>The system has detected an Underspeed Warning condition.</activeText>
                  <inactiveText>The Underspeed Warning condition has been cleared.</inactiveText>
              </description>
          </alarmFlagsTest>
          <!-- Customer did not specify - omit
          <alarmFlagsTest mask="4" match="4" log="no">
              <name>
                  <activeText>Over Voltage Alarm</activeText>
                  <inactiveText>Over Voltage Alarm Cleared</inactiveText>
              </name>
              <severity>error</severity>
              <category>Output</category>
              <description>
                  <activeText>The system has detected an Over Voltage Alarm condition.</activeText>
                  <inactiveText>The Over Voltage Alarm condition has been cleared.</inactiveText>
              </description>
          </alarmFlagsTest>
          <alarmFlagsTest mask="2" match="2" log="no">
              <name>
                  <activeText>Under Voltage Alarm</activeText>
                  <inactiveText>Under Voltage Alarm Cleared</inactiveText>
              </name>
              <severity>error</severity>
              <category>Output</category>
              <description>
                  <activeText>The system has detected an Under Voltage Alarm condition.</activeText>
                  <inactiveText>The Under Voltage Alarm condition has been cleared.</inactiveText>
              </description>
          </alarmFlagsTest>
          <alarmFlagsTest mask="1" match="1" log="no">
              <name>
                  <activeText>Over Frequency Alarm</activeText>
                  <inactiveText>Over Frequency Alarm Cleared</inactiveText>
              </name>
              <severity>error</severity>
              <category>Output</category>
              <description>
                  <activeText>The system has detected an Over Frequency Alarm condition.</activeText>
                  <inactiveText>The Over Frequency Alarm condition has been cleared.</inactiveText>
              </description>
          </alarmFlagsTest>
          -->
      </alarmFlags>

      <alarmFlags ruleid="alarmconds_1">
          <value><getOid>genalarmcond1</getOid></value>

          <!-- Customer did not specify - omit
          <alarmFlagsTest mask="8000" match="8000" log="no">
              <name>
                  <activeText>Under Frequency Alarm</activeText>
                  <inactiveText>Under Frequency Alarm Cleared</inactiveText>
              </name>
              <severity>error</severity>
              <category>Output</category>
              <description>
                  <activeText>The system has detected an Under Frequency Alarm condition.</activeText>
                  <inactiveText>The Under Frequency Alarm condition has been cleared.</inactiveText>
              </description>
          </alarmFlagsTest>
          <alarmFlagsTest mask="4000" match="4000" log="no">
              <name>
                  <activeText>High Fuel Alarm</activeText>
                  <inactiveText>High Fuel Alarm Cleared</inactiveText>
              </name>
              <severity>error</severity>
              <category>Output</category>
              <description>
                  <activeText>The system has detected a High Fuel Alarm condition.</activeText>
                  <inactiveText>The High Fuel Alarm condition has been cleared.</inactiveText>
              </description>
          </alarmFlagsTest>
          -->
          
          <alarmFlagsTest mask="2000" match="2000" log="no">
              <name>
                  <activeText>Low Fuel Warning</activeText>
                  <inactiveText>Low Fuel Warning Cleared</inactiveText>
              </name>
              <severity>warning</severity>
              <category>Output</category>
              <description>
                  <activeText>The system has detected a Low Fuel Warning condition.</activeText>
                  <inactiveText>The Low Fuel Warning condition has been cleared.</inactiveText>
              </description>
          </alarmFlagsTest>
          <alarmFlagsTest mask="1000" match="1000" log="no">
              <name>
                  <activeText>Low Fuel Alarm</activeText>
                  <inactiveText>Low Fuel Alarm Cleared</inactiveText>
              </name>
              <severity>error</severity>
              <category>Output</category>
              <description>
                  <activeText>The system has detected a Low Fuel Alarm condition.</activeText>
                  <inactiveText>The Low Fuel Alarm condition has been cleared.</inactiveText>
              </description>
          </alarmFlagsTest>
          <alarmFlagsTest mask="800" match="800" log="no">
              <name>
                  <activeText>Fail To Start Alarm</activeText>
                  <inactiveText>Fail To Start Alarm Cleared</inactiveText>
              </name>
              <severity>error</severity>
              <category>Output</category>
              <description>
                  <activeText>The system has detected a Fail To Start Alarm condition.</activeText>
                  <inactiveText>The Fail To Start Alarm condition has been cleared.</inactiveText>
              </description>
          </alarmFlagsTest>
          <alarmFlagsTest mask="400" match="400" log="no">
              <name>
                  <activeText>Coolant Level Alarm</activeText>
                  <inactiveText>Coolant Level Alarm Cleared</inactiveText>
              </name>
              <severity>error</severity>
              <category>Output</category>
              <description>
                  <activeText>The system has detected a Coolant Level Alarm condition.</activeText>
                  <inactiveText>The Coolant Level Alarm condition has been cleared.</inactiveText>
              </description>
          </alarmFlagsTest>
          <alarmFlagsTest mask="200" match="200" log="no">
              <name>
                  <activeText>RPM Sensor Loss</activeText>
                  <inactiveText>RPM Sensor Loss Cleared</inactiveText>
              </name>
              <severity>warning</severity>
              <category>Output</category>
              <description>
                  <activeText>The system has detected a RPM Sensor Loss condition.</activeText>
                  <inactiveText>The RPM Sensor Loss condition has been cleared.</inactiveText>
              </description>
          </alarmFlagsTest>
          <!-- Customer did not specify - omit
          <alarmFlagsTest mask="100" match="100" log="no">
              <name>
                  <activeText>Start Inhibit Alarm</activeText>
                  <inactiveText>Start Inhibit Alarm Cleared</inactiveText>
              </name>
              <severity>error</severity>
              <category>Output</category>
              <description>
                  <activeText>The system has detected a Start Inhibit Alarm condition.</activeText>
                  <inactiveText>The Start Inhibit Alarm condition has been cleared.</inactiveText>
              </description>
          </alarmFlagsTest>
          -->
          <alarmFlagsTest mask="80" match="80" log="no">
              <name>
                  <activeText>Emergency Stop Alarm</activeText>
                  <inactiveText>Emergency Stop Alarm Cleared</inactiveText>
              </name>
              <severity>error</severity>
              <category>Output</category>
              <description>
                  <activeText>The system has detected an Emergency Stop Alarm condition.</activeText>
                  <inactiveText>The Emergency Stop Alarm condition has been cleared.</inactiveText>
              </description>
          </alarmFlagsTest>
          <!-- Customer did not specify bits 6..0 - omit -->
      </alarmFlags>

      <alarmFlags ruleid="alarmconds_2">
          <value><getOid>genalarmcond2</getOid></value>
          <!-- Customer did not specify bits 15..2 - omit -->
                    
          <!-- bit 1 - alarm when not set -->
          <alarmFlagsTest mask="2" match="2" log="no">
              <name>
                  <activeText>Generator In Auto Alarm</activeText>
                  <inactiveText>Generator In Auto Alarm Cleared</inactiveText>
              </name>
              <severity>error</severity>
              <category>Output</category>
              <description>
                  <activeText>The system has detected a Generator In Auto Alarm condition.</activeText>
                  <inactiveText>The Generator In Auto Alarm condition has been cleared.</inactiveText>
              </description>
          </alarmFlagsTest>
          <alarmFlagsTest mask="1" match="1" log="no">
              <name>
                  <activeText>Generator In Manual Alarm</activeText>
                  <inactiveText>Generator In Manual Alarm Cleared</inactiveText>
              </name>
              <severity>error</severity>
              <category>Output</category>
              <description>
                  <activeText>The system has detected a Generator In Manual Alarm condition.</activeText>
                  <inactiveText>The Generator In Manual Alarm condition has been cleared.</inactiveText>
              </description>
          </alarmFlagsTest>
      </alarmFlags>

      <alarmFlags ruleid="alarmconds_3">
          <value><getOid>genalarmcond3</getOid></value>
          <alarmFlagsTest mask="8000" match="8000" log="no">
              <name>
                  <activeText>Generator In Off Alarm</activeText>
                  <inactiveText>Generator In Off Alarm Cleared</inactiveText>
              </name>
              <severity>error</severity>
              <category>Output</category>
              <description>
                  <activeText>The system has detected a Generator In Off Alarm condition.</activeText>
                  <inactiveText>The Generator In Off Alarm condition has been cleared.</inactiveText>
              </description>
          </alarmFlagsTest>
                    
          <alarmFlagsTest mask="800" match="800" log="no">
              <name>
                  <activeText>Generator Running Alarm</activeText>
                  <inactiveText>Generator Running Alarm Cleared</inactiveText>
              </name>
              <severity>error</severity>
              <category>Output</category>
              <description>
                  <activeText>The system has detected a Generator Running Alarm condition.</activeText>
                  <inactiveText>The Generator Running Alarm condition has been cleared.</inactiveText>
              </description>
          </alarmFlagsTest>
          <!-- Customer did not specify bit 0 - omit -->
      </alarmFlags>

      <alarmFlags ruleid="alarmconds_4">
          <value><getOid>genalarmcond4</getOid></value>
          <!-- Customer did not specify bits 15..14 - omit -->
                    
          <alarmFlagsTest mask="4000" match="2000" log="no">
              <name>
                  <activeText>Need Service</activeText>
                  <inactiveText>Need Service Cleared</inactiveText>
              </name>
              <severity>warning</severity>
              <category>Output</category>
              <description>
                  <activeText>The system needs to be serviced.</activeText>
                  <inactiveText>The Need Service condition has been cleared.</inactiveText>
              </description>
          </alarmFlagsTest>
          <alarmFlagsTest mask="2000" match="2000" log="no">
              <name>
                  <activeText>Battery Charger AC failure</activeText>
                  <inactiveText>Battery Charger AC failure Cleared</inactiveText>
              </name>
              <severity>warning</severity>
              <category>Output</category>
              <description>
                  <activeText>The system has detected a Battery Charger AC failure condition.</activeText>
                  <inactiveText>The Battery Charger AC failure condition has been cleared.</inactiveText>
              </description>
          </alarmFlagsTest>
          <!-- Customer did not specify bit 12 - omit -->
          <alarmFlagsTest mask="800" match="800" log="no">
              <name>
                  <activeText>Generator Power Alarm</activeText>
                  <inactiveText>Generator Power Alarm Cleared</inactiveText>
              </name>
              <severity>error</severity>
              <category>Output</category>
              <description>
                  <activeText>The system has detected a Generator Power Alarm condition.</activeText>
                  <inactiveText>The Generator Power Alarm condition has been cleared.</inactiveText>
              </description>
          </alarmFlagsTest>
          <!-- Customer did not specify bits 10..0 - omit -->
      </alarmFlags>

  </device>

  <protocol>
    <modbus>    
		<value_ref_id valid="oiltemp">
            <function>3</function>
            <start_addr>139</start_addr>
            <quantity>1</quantity>
            <type>uint_16</type>
        </value_ref_id>
		<value_ref_id valid="coolanttemp">
            <function>3</function>
            <start_addr>141</start_addr>
            <quantity>1</quantity>
            <type>uint_16</type>
        </value_ref_id>
		<value_ref_id valid="oilpressure">
            <function>3</function>
            <start_addr>143</start_addr>
            <quantity>1</quantity>
            <type>uint_16</type>
        </value_ref_id>
		<value_ref_id valid="coolantlevel">
            <function>3</function>
            <start_addr>157</start_addr>
            <quantity>1</quantity>
            <type>uint_16</type>
        </value_ref_id>
		<value_ref_id valid="fuellevel">
            <function>3</function>
            <start_addr>159</start_addr>
            <quantity>1</quantity>
            <type>uint_16</type>
        </value_ref_id>

		<value_ref_id valid="battcurrent">
            <function>3</function>
            <start_addr>167</start_addr>
            <quantity>1</quantity>
            <type>uint_16</type>
        </value_ref_id>
		<value_ref_id valid="battvoltage">
            <function>3</function>
            <start_addr>173</start_addr>
            <quantity>1</quantity>
            <type>uint_16</type>
        </value_ref_id>

        <value_ref_id valid="gencurrenta">
            <function>3</function>
            <start_addr>183</start_addr>
            <quantity>1</quantity>
            <type>uint_16</type>
        </value_ref_id> 
        <value_ref_id valid="gencurrentb">
            <function>3</function>
            <start_addr>185</start_addr>
            <quantity>1</quantity>
            <type>uint_16</type>
        </value_ref_id> 
        <value_ref_id valid="gencurrentc">
            <function>3</function>
            <start_addr>187</start_addr>
            <quantity>1</quantity>
            <type>uint_16</type>
        </value_ref_id> 
		<value_ref_id valid="gencurrentavg">
            <function>3</function>
            <start_addr>189</start_addr>
            <quantity>1</quantity>
            <type>uint_16</type>
        </value_ref_id>

        <value_ref_id valid="genvoltageab">
            <function>3</function>
            <start_addr>199</start_addr>
            <quantity>1</quantity>
            <type>uint_16</type>
        </value_ref_id> 
        <value_ref_id valid="genvoltagebc">
            <function>3</function>
            <start_addr>201</start_addr>
            <quantity>1</quantity>
            <type>uint_16</type>
        </value_ref_id> 
        <value_ref_id valid="genvoltageca">
            <function>3</function>
            <start_addr>203</start_addr>
            <quantity>1</quantity>
            <type>uint_16</type>
        </value_ref_id>
		<value_ref_id valid="genvoltageavg">
            <function>3</function>
            <start_addr>205</start_addr>
            <quantity>1</quantity>
            <type>uint_16</type>
        </value_ref_id>

        <value_ref_id valid="buscurrenta">
            <function>3</function>
            <start_addr>175</start_addr>
            <quantity>1</quantity>
            <type>uint_16</type>
        </value_ref_id> 
        <value_ref_id valid="buscurrentb">
            <function>3</function>
            <start_addr>177</start_addr>
            <quantity>1</quantity>
            <type>uint_16</type>
        </value_ref_id> 
        <value_ref_id valid="buscurrentc">
            <function>3</function>
            <start_addr>179</start_addr>
            <quantity>1</quantity>
            <type>uint_16</type>
        </value_ref_id> 
		<value_ref_id valid="buscurrentavg">
            <function>3</function>
            <start_addr>181</start_addr>
            <quantity>1</quantity>
            <type>uint_16</type>
        </value_ref_id>

        <value_ref_id valid="busvoltageab">
            <function>3</function>
            <start_addr>191</start_addr>
            <quantity>1</quantity>
            <type>uint_16</type>
        </value_ref_id> 
        <value_ref_id valid="busvoltagebc">
            <function>3</function>
            <start_addr>193</start_addr>
            <quantity>1</quantity>
            <type>uint_16</type>
        </value_ref_id> 
        <value_ref_id valid="busvoltageca">
            <function>3</function>
            <start_addr>195</start_addr>
            <quantity>1</quantity>
            <type>uint_16</type>
        </value_ref_id>
		<value_ref_id valid="busvoltageavg">
            <function>3</function>
            <start_addr>197</start_addr>
            <quantity>1</quantity>
            <type>uint_16</type>
        </value_ref_id>

		<value_ref_id valid="gentotalkw">
            <function>3</function>
            <start_addr>207</start_addr>
            <quantity>1</quantity>
            <type>uint_16</type>
        </value_ref_id>
		<value_ref_id valid="bustotalkw">
            <function>3</function>
            <start_addr>209</start_addr>
            <quantity>1</quantity>
            <type>uint_16</type>
        </value_ref_id>
		<value_ref_id valid="gentotalpf">
            <function>3</function>
            <start_addr>211</start_addr>
            <quantity>1</quantity>
            <type>uint_16</type>
        </value_ref_id>
		<value_ref_id valid="bustotalpf">
            <function>3</function>
            <start_addr>213</start_addr>
            <quantity>1</quantity>
            <type>uint_16</type>
        </value_ref_id>
		<value_ref_id valid="genfreq">
            <function>3</function>
            <start_addr>215</start_addr>
            <quantity>1</quantity>
            <type>uint_16</type>
        </value_ref_id>
		<value_ref_id valid="busfreq">
            <function>3</function>
            <start_addr>217</start_addr>
            <quantity>1</quantity>
            <type>uint_16</type>
        </value_ref_id>
		<value_ref_id valid="enginerpm">
            <function>3</function>
            <start_addr>219</start_addr>
            <quantity>1</quantity>
            <type>uint_16</type>
        </value_ref_id>
        
        <value_ref_id valid="genalarmcond0">
            <function>3</function>
            <start_addr>130</start_addr>
            <quantity>1</quantity>
            <type>uint_16</type>
        </value_ref_id>
        <value_ref_id valid="genalarmcond1">
            <function>3</function>
            <start_addr>131</start_addr>
            <quantity>1</quantity>
            <type>uint_16</type>
        </value_ref_id>
        <value_ref_id valid="genalarmcond2">
            <function>3</function>
            <start_addr>132</start_addr>
            <quantity>1</quantity>
            <type>uint_16</type>
        </value_ref_id>
        <value_ref_id valid="genalarmcond3">
            <function>3</function>
            <start_addr>133</start_addr>
            <quantity>1</quantity>
            <type>uint_16</type>
        </value_ref_id>
        <value_ref_id valid="genalarmcond4">
            <function>3</function>
            <start_addr>134</start_addr>
            <quantity>1</quantity>
            <type>uint_16</type>
        </value_ref_id>

        <!-- Bulk read for performance. -->
        <packet>
            <function>3</function>
            <start_addr>130</start_addr>
            <quantity>5</quantity>
        </packet>
    </modbus>
  </protocol>
</APC_DDF>    
