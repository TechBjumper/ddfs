<?xml version="1.0" encoding="UTF-8"?>
<APC_DDF xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="http://localhost/ddf_schema/apc_ddf_1_6.xsd" ddfid="technologypower_ecm905" ddfname="TechnologyPower ECM905" ddfversion="1" canremove="yes">
  <schemaVersion>1.6</schemaVersion>
  <device deviceid="technologypower_ecm905">
    <oidMustExist ruleid="modbusdevicetest" oid="MODBUS_OID_MUST_EXIST" />
    <setProductData ruleid="vendordata" field="vendor">TechnologyPower</setProductData>
    <setProductData ruleid="modeldata" field="model">ECM905</setProductData>
    <setProductData ruleid="typedata" field="type">Power Meter</setProductData>
    <setDefaultLabel ruleid="labeldata">
      <sysHostname />
      - Slave
      <commSetting field="slaveaddress" />
    </setDefaultLabel>
    <numSensor ruleid="phase_a_current_40001">
      <type>amperage</type>
      <units />
      <sensorId>1_CURRENT_5</sensorId>
      <value>
        <mult>
          <op>
            <getOid>PHASE_A_CURRENT_40001</getOid>
          </op>
          <op>0.01</op>
        </mult>
      </value>
      <label>Phase A current_40001</label>
      <sensorSet>current</sensorSet>
    </numSensor>
    <numSensor ruleid="phase_b_current_40002">
      <type>amperage</type>
      <units />
      <sensorId>2_CURRENT_5</sensorId>
      <value>
        <mult>
          <op>
            <getOid>PHASE_B_CURRENT_40002</getOid>
          </op>
          <op>0.01</op>
        </mult>
      </value>
      <label>Phase B current_40002</label>
      <sensorSet>current</sensorSet>
    </numSensor>
    <numSensor ruleid="phase_c_current_40003">
      <type>amperage</type>
      <units />
      <sensorId>3_CURRENT_5</sensorId>
      <value>
        <mult>
          <op>
            <getOid>PHASE_C_CURRENT_40003</getOid>
          </op>
          <op>0.01</op>
        </mult>
      </value>
      <label>Phase C current_40003</label>
      <sensorSet>current</sensorSet>
    </numSensor>
    <numSensor ruleid="line_ab_voltage">
      <type>voltage</type>
      <units />
      <sensorId>1_VOLTAGE_LN_4</sensorId>
      <value>
        <mult>
          <op>
            <getOid>LINE_AB_VOLTAGE</getOid>
          </op>
          <op>0.01</op>
        </mult>
      </value>
      <label>Line AB voltage</label>
      <sensorSet>voltage</sensorSet>
    </numSensor>
    <numSensor ruleid="line_bc_voltage">
      <type>voltage</type>
      <units />
      <sensorId>2_VOLTAGE_LN_4</sensorId>
      <value>
        <mult>
          <op>
            <getOid>LINE_BC_VOLTAGE</getOid>
          </op>
          <op>0.01</op>
        </mult>
      </value>
      <label>Line BC voltage</label>
      <sensorSet>voltage</sensorSet>
    </numSensor>
    <numSensor ruleid="line_ca_voltage">
      <type>voltage</type>
      <units />
      <sensorId>3_VOLTAGE_LN_4</sensorId>
      <value>
        <mult>
          <op>
            <getOid>LINE_CA_VOLTAGE</getOid>
          </op>
          <op>0.01</op>
        </mult>
      </value>
      <label>Line CA voltage</label>
      <sensorSet>voltage</sensorSet>
    </numSensor>
    <numSensor ruleid="phase_a_current_40009">
      <type>amperage</type>
      <units />
      <sensorId>4_CURRENT_5</sensorId>
      <value>
        <mult>
          <op>
            <getOid>PHASE_A_CURRENT_40009</getOid>
          </op>
          <op>0.001</op>
        </mult>
      </value>
      <label>Phase A current_40009</label>
      <sensorSet>current</sensorSet>
    </numSensor>
    <numSensor ruleid="phase_b_current_40010">
      <type>amperage</type>
      <units />
      <sensorId>5_CURRENT_5</sensorId>
      <value>
        <mult>
          <op>
            <getOid>PHASE_B_CURRENT_40010</getOid>
          </op>
          <op>0.001</op>
        </mult>
      </value>
      <label>Phase B current_40010</label>
      <sensorSet>current</sensorSet>
    </numSensor>
    <numSensor ruleid="phase_c_current_40011">
      <type>amperage</type>
      <units />
      <sensorId>6_CURRENT_5</sensorId>
      <value>
        <mult>
          <op>
            <getOid>PHASE_C_CURRENT_40011</getOid>
          </op>
          <op>0.001</op>
        </mult>
      </value>
      <label>Phase C current_40011</label>
      <sensorSet>current</sensorSet>
    </numSensor>
    <numSensor ruleid="phase_a_active_power">
      <type>powerW</type>
      <units />
      <sensorId>REAL_POWER_1</sensorId>
      <value>
        <mult>
          <op>
            <getOid>PHASE_A_ACTIVE_POWER</getOid>
          </op>
          <op>0.1</op>
        </mult>
      </value>
      <label>Phase A active power</label>
      <sensorSet>active power</sensorSet>
    </numSensor>
    <numSensor ruleid="phase_b_active_power">
      <type>powerW</type>
      <units />
      <sensorId>REAL_POWER_2</sensorId>
      <value>
        <mult>
          <op>
            <getOid>PHASE_B_ACTIVE_POWER</getOid>
          </op>
          <op>0.1</op>
        </mult>
      </value>
      <label>Phase B active power</label>
      <sensorSet>active power</sensorSet>
    </numSensor>
    <numSensor ruleid="phase_c_active_power">
      <type>powerW</type>
      <units />
      <sensorId>REAL_POWER_3</sensorId>
      <value>
        <mult>
          <op>
            <getOid>PHASE_C_ACTIVE_POWER</getOid>
          </op>
          <op>0.1</op>
        </mult>
      </value>
      <label>Phase C active power</label>
      <sensorSet>active power</sensorSet>
    </numSensor>
    <numSensor ruleid="total_active_power">
      <type>powerW</type>
      <units />
      <sensorId>REAL_POWER_4</sensorId>
      <value>
        <mult>
          <op>
            <getOid>TOTAL_ACTIVE_POWER</getOid>
          </op>
          <op>0.1</op>
        </mult>
      </value>
      <label>Total active power</label>
      <sensorSet>active power</sensorSet>
    </numSensor>
    <numSensor ruleid="phase_a_reactive_power">
      <type>powerVA/powerVAR</type>
      <units />
      <sensorId>Phase A reactive power</sensorId>
      <value>
        <mult>
          <op>
            <getOid>PHASE_A_REACTIVE_POWER</getOid>
          </op>
          <op>0.1</op>
        </mult>
      </value>
      <label>Phase A reactive power</label>
      <sensorSet>reactive power</sensorSet>
    </numSensor>
    <numSensor ruleid="phase_b_reactive_power">
      <type>powerVA/powerVAR</type>
      <units />
      <sensorId>Phase B reactive power</sensorId>
      <value>
        <mult>
          <op>
            <getOid>PHASE_B_REACTIVE_POWER</getOid>
          </op>
          <op>0.1</op>
        </mult>
      </value>
      <label>Phase B reactive power</label>
      <sensorSet>reactive power</sensorSet>
    </numSensor>
    <numSensor ruleid="phase_c_reactive_power">
      <type>powerVA/powerVAR</type>
      <units />
      <sensorId>Phase C reactive power</sensorId>
      <value>
        <mult>
          <op>
            <getOid>PHASE_C_REACTIVE_POWER</getOid>
          </op>
          <op>0.1</op>
        </mult>
      </value>
      <label>Phase C reactive power</label>
      <sensorSet>reactive power</sensorSet>
    </numSensor>
    <numSensor ruleid="total_reactive_power">
      <type>powerVA/powerVAR</type>
      <units />
      <sensorId>Total reactive power</sensorId>
      <value>
        <mult>
          <op>
            <getOid>TOTAL_REACTIVE_POWER</getOid>
          </op>
          <op>0.1</op>
        </mult>
      </value>
      <label>Total reactive power</label>
      <sensorSet>reactive power</sensorSet>
    </numSensor>
    <numSensor ruleid="phase_a_apparent_power">
      <type>powerVA</type>
      <units />
      <sensorId>APPARENT_POWER_1</sensorId>
      <value>
        <mult>
          <op>
            <getOid>PHASE_A_APPARENT_POWER</getOid>
          </op>
          <op>0.1</op>
        </mult>
      </value>
      <label>Phase A apparent power</label>
      <sensorSet>apparent power</sensorSet>
    </numSensor>
    <numSensor ruleid="phase_b_apparent_power">
      <type>powerVA</type>
      <units />
      <sensorId>APPARENT_POWER_2</sensorId>
      <value>
        <mult>
          <op>
            <getOid>PHASE_B_APPARENT_POWER</getOid>
          </op>
          <op>0.1</op>
        </mult>
      </value>
      <label>Phase B apparent power</label>
      <sensorSet>apparent power</sensorSet>
    </numSensor>
    <numSensor ruleid="_phase_c_apparent_power">
      <type>powerVA</type>
      <units />
      <sensorId>APPARENT_POWER_3</sensorId>
      <value>
        <mult>
          <op>
            <getOid>PHASE_C_APPARENT_POWER</getOid>
          </op>
          <op>0.1</op>
        </mult>
      </value>
      <label>Phase C apparent power</label>
      <sensorSet>apparent power</sensorSet>
    </numSensor>
    <numSensor ruleid="total_apparent_power">
      <type>powerVA</type>
      <units />
      <sensorId>APPARENT_POWER_TOTAL</sensorId>
      <value>
        <mult>
          <op>
            <getOid>TOTAL_APPARENT_POWER</getOid>
          </op>
          <op>0.1</op>
        </mult>
      </value>
      <label>Total apparent power</label>
      <sensorSet>apparent power</sensorSet>
    </numSensor>
    <numSensor ruleid="phase_a_power_factor">
      <type>num/powerfactor</type>
      <units />
      <sensorId>1_TOTAL_POWER_FACTOR_2</sensorId>
      <value>
        <mult>
          <op>
            <getOid>PHASE_A_POWER_FACTOR</getOid>
          </op>
          <op>0.001</op>
        </mult>
      </value>
      <label>Phase A power factor</label>
      <sensorSet>power factor</sensorSet>
    </numSensor>
    <numSensor ruleid="phase_b_power_factor">
      <type>num/powerfactor</type>
      <units />
      <sensorId>2_TOTAL_POWER_FACTOR_2</sensorId>
      <value>
        <mult>
          <op>
            <getOid>PHASE_B_POWER_FACTOR</getOid>
          </op>
          <op>0.001</op>
        </mult>
      </value>
      <label>Phase B power factor</label>
      <sensorSet>power factor</sensorSet>
    </numSensor>
    <numSensor ruleid="phase_c_power_factor">
      <type>num/powerfactor</type>
      <units />
      <sensorId>3_TOTAL_POWER_FACTOR_2</sensorId>
      <value>
        <mult>
          <op>
            <getOid>PHASE_C_POWER_FACTOR</getOid>
          </op>
          <op>0.001</op>
        </mult>
      </value>
      <label>Phase C power factor</label>
      <sensorSet>power factor</sensorSet>
    </numSensor>
    <numSensor ruleid="total_power_factor">
      <type>num/powerfactor</type>
      <units />
      <sensorId>4_TOTAL_POWER_FACTOR_2</sensorId>
      <value>
        <mult>
          <op>
            <getOid>TOTAL_POWER_FACTOR</getOid>
          </op>
          <op>0.001</op>
        </mult>
      </value>
      <label>Total power factor</label>
      <sensorSet>power factor</sensorSet>
    </numSensor>
    <numSensor ruleid="frequency">
      <type>frequency</type>
      <units />
      <sensorId>1_FREQUENCY_1</sensorId>
      <value>
        <mult>
          <op>
            <getOid>FREQUENCY</getOid>
          </op>
          <op>0.01</op>
        </mult>
      </value>
      <label>Frequency</label>
      <sensorSet>frequency</sensorSet>
    </numSensor>
  </device>
  <protocol>
    <modbus>
      <value_ref_id valid="PHASE_B_REACTIVE_POWER">
        <function>3</function>
        <start_addr>19</start_addr>
        <quantity>1</quantity>
        <type>int_16</type>
      </value_ref_id>
      <value_ref_id valid="PHASE_B_POWER_FACTOR">
        <function>3</function>
        <start_addr>29</start_addr>
        <quantity>1</quantity>
        <type>int_16</type>
      </value_ref_id>
      <value_ref_id valid="PHASE_A_APPARENT_POWER">
        <function>3</function>
        <start_addr>23</start_addr>
        <quantity>1</quantity>
        <type>uint_16</type>
      </value_ref_id>
      <value_ref_id valid="TOTAL_APPARENT_POWER">
        <function>3</function>
        <start_addr>27</start_addr>
        <quantity>2</quantity>
        <type>uint_32</type>
      </value_ref_id>
      <value_ref_id valid="PHASE_B_CURRENT_40002">
        <function>3</function>
        <start_addr>1</start_addr>
        <quantity>1</quantity>
        <type>uint_16</type>
      </value_ref_id>
      <value_ref_id valid="LINE_BC_VOLTAGE">
        <function>3</function>
        <start_addr>5</start_addr>
        <quantity>1</quantity>
        <type>uint_16</type>
      </value_ref_id>
      <value_ref_id valid="PHASE_A_REACTIVE_POWER">
        <function>3</function>
        <start_addr>18</start_addr>
        <quantity>1</quantity>
        <type>int_16</type>
      </value_ref_id>
      <value_ref_id valid="LINE_CA_VOLTAGE">
        <function>3</function>
        <start_addr>6</start_addr>
        <quantity>1</quantity>
        <type>uint_16</type>
      </value_ref_id>
      <value_ref_id valid="PHASE_C_ACTIVE_POWER">
        <function>3</function>
        <start_addr>15</start_addr>
        <quantity>1</quantity>
        <type>int_16</type>
      </value_ref_id>
      <value_ref_id valid="PHASE_A_POWER_FACTOR">
        <function>3</function>
        <start_addr>28</start_addr>
        <quantity>1</quantity>
        <type>int_16</type>
      </value_ref_id>
      <value_ref_id valid="TOTAL_REACTIVE_POWER">
        <function>3</function>
        <start_addr>22</start_addr>
        <quantity>2</quantity>
        <type>int_32</type>
      </value_ref_id>
      <value_ref_id valid="TOTAL_POWER_FACTOR">
        <function>3</function>
        <start_addr>31</start_addr>
        <quantity>1</quantity>
        <type>int_16</type>
      </value_ref_id>
      <value_ref_id valid="PHASE_C_REACTIVE_POWER">
        <function>3</function>
        <start_addr>20</start_addr>
        <quantity>1</quantity>
        <type>int_16</type>
      </value_ref_id>
      <value_ref_id valid="PHASE_C_CURRENT_40011">
        <function>3</function>
        <start_addr>10</start_addr>
        <quantity>1</quantity>
        <type>uint_16</type>
      </value_ref_id>
      <value_ref_id valid="LINE_AB_VOLTAGE">
        <function>3</function>
        <start_addr>4</start_addr>
        <quantity>1</quantity>
        <type>uint_16</type>
      </value_ref_id>
      <value_ref_id valid="PHASE_C_POWER_FACTOR">
        <function>3</function>
        <start_addr>30</start_addr>
        <quantity>1</quantity>
        <type>int_16</type>
      </value_ref_id>
      <value_ref_id valid="PHASE_B_ACTIVE_POWER">
        <function>3</function>
        <start_addr>14</start_addr>
        <quantity>1</quantity>
        <type>int_16</type>
      </value_ref_id>
      <value_ref_id valid="PHASE_C_CURRENT_40003">
        <function>3</function>
        <start_addr>2</start_addr>
        <quantity>1</quantity>
        <type>uint_16</type>
      </value_ref_id>
      <value_ref_id valid="FREQUENCY">
        <function>3</function>
        <start_addr>32</start_addr>
        <quantity>1</quantity>
        <type>uint_16</type>
      </value_ref_id>
      <value_ref_id valid="PHASE_A_CURRENT_40009">
        <function>3</function>
        <start_addr>8</start_addr>
        <quantity>1</quantity>
        <type>uint_16</type>
      </value_ref_id>
      <value_ref_id valid="PHASE_B_APPARENT_POWER">
        <function>3</function>
        <start_addr>24</start_addr>
        <quantity>1</quantity>
        <type>uint_16</type>
      </value_ref_id>
      <value_ref_id valid="TOTAL_ACTIVE_POWER">
        <function>3</function>
        <start_addr>17</start_addr>
        <quantity>2</quantity>
        <type>int_32</type>
      </value_ref_id>
      <value_ref_id valid="PHASE_B_CURRENT_40010">
        <function>3</function>
        <start_addr>9</start_addr>
        <quantity>1</quantity>
        <type>uint_16</type>
      </value_ref_id>
      <value_ref_id valid="PHASE_C_APPARENT_POWER">
        <function>3</function>
        <start_addr>25</start_addr>
        <quantity>1</quantity>
        <type>uint_16</type>
      </value_ref_id>
      <value_ref_id valid="PHASE_A_ACTIVE_POWER">
        <function>3</function>
        <start_addr>13</start_addr>
        <quantity>1</quantity>
        <type>int_16</type>
      </value_ref_id>
      <value_ref_id valid="PHASE_A_CURRENT_40001">
        <function>3</function>
        <start_addr>0</start_addr>
        <quantity>1</quantity>
        <type>uint_16</type>
      </value_ref_id>
    </modbus>
  </protocol>
</APC_DDF>
