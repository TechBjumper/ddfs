<?xml version="1.0"?>
<!-- Same as standard ion7650 DDF but with support for I/O module installed and 16 DIs mapped to registers 40011-40026 -->
<!-- also custom mappings for current demand (present and peak), kwhdel+rec, kwhdel-rec -->
<APC_DDF xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="http://localhost/ddf_schema/apc_ddf_1_4.xsd"
         ddfid="powerlogic_ion7650_slaveio" ddfname="PowerLogic ION 7650 with I/O Module" ddfversion="4">
  <schemaVersion>1.4</schemaVersion>

  <device deviceid="powerlogic_ion_7650">
	  <oidMustExist ruleid="modbusdevicetest" oid="MODBUS_OID_MUST_EXIST"/>

	  <setProductData ruleid="vendordata" field="vendor">PowerLogic</setProductData>
	  <setProductData ruleid="modeldata" field="model">PowerLogic ION7650</setProductData>
	  <setProductData ruleid="typedata" field="type">Power Meter</setProductData>
	  <setDefaultLabel ruleid="labeldata"><sysHostname/> - Slave <commSetting field="slaveaddress"/></setDefaultLabel>
	  <setProductData ruleid="appversion" field="appversion">
		  <getOid>firmware_version</getOid>
	  </setProductData>

	  <numSensor ruleid="power_kw_a">
      <rowTest>
        <mapValue mapid="delete_null_sensor_i32">
          <getOid default="-1">kwa</getOid>
        </mapValue>
      </rowTest>
		  <type>num/powerKW</type>
		  <sensorId>POWER_KW_1</sensorId>
		  <value>
		  	 <getOid>kwa</getOid>
         </value>
		  <label>kW a</label>
		  <sensorSet>Power Sensors</sensorSet>
	  </numSensor>

    <numSensor ruleid="power_kw_b">
      <rowTest>
        <mapValue mapid="delete_null_sensor_i32">
          <getOid default="-1">kwb</getOid>
        </mapValue>
      </rowTest>
		  <type>num/powerKW</type>
		  <sensorId>POWER_KW_2</sensorId>
		  <value>
		    <getOid>kwb</getOid>
        </value>
		  <label>kW b</label>
		  <sensorSet>Power Sensors</sensorSet>
	  </numSensor>

    <numSensor ruleid="power_kw_c">
      <rowTest>
        <mapValue mapid="delete_null_sensor_i32">
          <getOid default="-1">kwc</getOid>
        </mapValue>
      </rowTest>
		  <type>num/powerKW</type>
		  <sensorId>POWER_KW_3</sensorId>
		  <value>
		  <getOid>kwc</getOid>
		  </value>
		  <label>kW c</label>
		  <sensorSet>Power Sensors</sensorSet>
	  </numSensor>

    <numSensor ruleid="power_kw_tot">
      <rowTest>
        <mapValue mapid="delete_null_sensor_i32">
          <getOid default="-1">kwtot</getOid>
        </mapValue>
      </rowTest>
		  <type>num/powerKW</type>
		  <sensorId>TOTAL_POWER_KW_1</sensorId>
		  <value>
		  <getOid>kwtot</getOid>
		  </value>
		  <label>kW tot</label>
		  <sensorSet>Power Sensors</sensorSet>
	  </numSensor>

    <numSensor ruleid="power_kw_tot_mx">
      <rowTest>
        <mapValue mapid="delete_null_sensor_i32">
          <getOid default="-1">kwtotmx</getOid>
        </mapValue>
      </rowTest>
		  <type>num/powerKW</type>
		  <sensorId>TOTAL_POWER_KW_3</sensorId>
		  <value>
		  <getOid>kwtotmx</getOid>
		  </value>
		  <label>kW tot mx</label>
		  <sensorSet>Power Sensors</sensorSet>
	  </numSensor>

	  <numSensor ruleid="power_kvar_a">
      <rowTest>
        <mapValue mapid="delete_null_sensor_i32">
          <getOid default="-1">kvara</getOid>
        </mapValue>
      </rowTest>
		  <type>num/powerKVAR</type>
		  <sensorId>POWER_KVAR_1</sensorId>
		  <value>
		  	<getOid>kvara</getOid>
       </value>
		  <label>kVar a</label>
		  <sensorSet>Power Sensors</sensorSet>
	  </numSensor>

    <numSensor ruleid="power_kvar_c">
      <rowTest>
        <mapValue mapid="delete_null_sensor_i32">
          <getOid default="-1">kvarc</getOid>
        </mapValue>
      </rowTest>
		  <type>num/powerKVAR</type>
		  <sensorId>POWER_KVAR_3</sensorId>
		  <value>
		  <getOid>kvarc</getOid>
		  </value>
		  <label>kVar c</label>
		  <sensorSet>Power Sensors</sensorSet>
	  </numSensor>

    <numSensor ruleid="power_kvar_b">
      <rowTest>
        <mapValue mapid="delete_null_sensor_i32">
          <getOid default="-1">kvarb</getOid>
        </mapValue>
      </rowTest>
		  <type>num/powerKVAR</type>
		  <sensorId>POWER_KVAR_2</sensorId>
		  <value>
		    <getOid>kvarb</getOid>
		  </value>
		  <label>kVar b</label>
		  <sensorSet>Power Sensors</sensorSet>
	  </numSensor>

    <numSensor ruleid="power_kvar_tot">
      <rowTest>
        <mapValue mapid="delete_null_sensor_i32">
          <getOid default="-1">kvartot</getOid>
        </mapValue>
      </rowTest>
		  <type>num/powerKVAR</type>
		  <sensorId>TOTAL_POWER_KVAR_1</sensorId>
		  <value>
		   <getOid>kvartot</getOid>
		  </value>
		  <label>kVar tot</label>
		  <sensorSet>Power Sensors</sensorSet>
	  </numSensor>

     <numSensor ruleid="power_kvar_tot_mx">
      <rowTest>
        <mapValue mapid="delete_null_sensor_i32">
          <getOid default="-1">kvartotmx</getOid>
        </mapValue>
      </rowTest>
		  <type>num/powerKVAR</type>
		  <sensorId>TOTAL_POWER_KVAR_3</sensorId>
		  <value>
		   <getOid>kvartotmx</getOid>
		  </value>
		  <label>kVar tot mx</label>
		  <sensorSet>Power Sensors</sensorSet>
	  </numSensor>

	  <numSensor ruleid="power_kva_a">
      <rowTest>
        <mapValue mapid="delete_null_sensor_i32">
          <getOid default="-1">kvaa</getOid>
        </mapValue>
      </rowTest>
		  <type>num/powerKVA</type>
		  <sensorId>POWER_KVA_1</sensorId>
		  <value>
		    <getOid>kvaa</getOid>
      </value>
		  <label>kVA a</label>
		  <sensorSet>Power Sensors</sensorSet>
	  </numSensor>

    <numSensor ruleid="power_kva_c">
      <rowTest>
        <mapValue mapid="delete_null_sensor_i32">
          <getOid default="-1">kvac</getOid>
        </mapValue>
      </rowTest>
		  <type>num/powerKVA</type>
		  <sensorId>POWER_KVA_3</sensorId>
		  <value>
		    <getOid>kvac</getOid>
		  </value>
		  <label>kVA c</label>
		  <sensorSet>Power Sensors</sensorSet>
	  </numSensor>

     <numSensor ruleid="power_kva_b">
      <rowTest>
        <mapValue mapid="delete_null_sensor_i32">
          <getOid default="-1">kvab</getOid>
        </mapValue>
      </rowTest>
		  <type>num/powerKVA</type>
		  <sensorId>POWER_KVA_2</sensorId>
		  <value>
		    <getOid>kvab</getOid>
		  </value>
		  <label>kVA b</label>
		  <sensorSet>Power Sensors</sensorSet>
	  </numSensor>

     <numSensor ruleid="power_kva_tot">
      <rowTest>
        <mapValue mapid="delete_null_sensor_i32">
          <getOid default="-1">kvatot</getOid>
        </mapValue>
      </rowTest>
		  <type>num/powerKVA</type>
		  <sensorId>TOTAL_POWER_KVA_1</sensorId>
		  <value>
		   <getOid>kvatot</getOid>
		  </value>
		  <label>kVA tot</label>
		  <sensorSet>Power Sensors</sensorSet>
	  </numSensor>

     <numSensor ruleid="power_kva_tot_mx">
      <rowTest>
        <mapValue mapid="delete_null_sensor_i32">
          <getOid default="-1">kvatotmx</getOid>
        </mapValue>
      </rowTest>
		  <type>num/powerKVA</type>
		  <sensorId>TOTAL_POWER_KVA_3</sensorId>
		  <value>
		    <getOid>kvatotmx</getOid>
		  </value>
		  <label>kVA tot mx</label>
		  <sensorSet>Power Sensors</sensorSet>
	  </numSensor>
	  
	  <numSensor ruleid="input_current_avg">
      <rowTest>
        <mapValue mapid="delete_null_sensor_u16">
          <getOid default="-1">iavg</getOid>
        </mapValue>
      </rowTest>
		  <type>amperage</type>
		  <sensorId>AVERAGE_CURRENT_1</sensorId>
		  <value>
			  <mult>
				  <op><getOid>iavg</getOid></op>
				  <op>0.1</op>
			  </mult>
		  </value>
		  <label>I avg</label>
		  <sensorSet>Current Sensors</sensorSet>
	  </numSensor>
	  
	  <numSensor ruleid="input_current_ia">
      <rowTest>
        <mapValue mapid="delete_null_sensor_u16">
          <getOid default="-1">ia</getOid>
        </mapValue>
      </rowTest>
		  <type>amperage</type>
		  <sensorId>CURRENT_1</sensorId>
		  <value>
			  <mult>
				  <op><getOid>ia</getOid></op>
				  <op>0.1</op>
			  </mult>
		  </value>
		  <label>I a</label>
		  <sensorSet>Current Sensors</sensorSet>
	  </numSensor>

	  <numSensor ruleid="input_current_ib">
      <rowTest>
        <mapValue mapid="delete_null_sensor_u16">
          <getOid default="-1">ib</getOid>
        </mapValue>
      </rowTest>
		  <type>amperage</type>
		  <sensorId>CURRENT_2</sensorId>
		  <value>
			  <mult>
				  <op><getOid>ib</getOid></op>
				  <op>0.1</op>
			  </mult>
		  </value>
		  <label>I b</label>
		  <sensorSet>Current Sensors</sensorSet>
	  </numSensor>

	  <numSensor ruleid="input_current_ic">
      <rowTest>
        <mapValue mapid="delete_null_sensor_u16">
          <getOid default="-1">ic</getOid>
        </mapValue>
      </rowTest>
		  <type>amperage</type>
		  <sensorId>CURRENT_3</sensorId>
		  <value>
			  <mult>
				  <op><getOid>ic</getOid></op>
				  <op>0.1</op>
			  </mult>
		  </value>
		  <label>I c</label>
		  <sensorSet>Current Sensors</sensorSet>
	  </numSensor>
	 
	  <numSensor ruleid="input_current_i4">
      <rowTest>
        <mapValue mapid="delete_null_sensor_u16">
          <getOid default="-1">i4</getOid>
        </mapValue>
      </rowTest>
		  <type>amperage</type>
		  <sensorId>CURRENT_6</sensorId>
		  <value>
			  <mult>
				  <op><getOid>i4</getOid></op>
				  <op>0.1</op>
			  </mult>
		  </value>
		  <label>I 4</label>
		  <sensorSet>Current Sensors</sensorSet>
	  </numSensor>
	 
	 	  <numSensor ruleid="input_current_i5">
      <rowTest>
        <mapValue mapid="delete_null_sensor_u16">
          <getOid default="-1">i5</getOid>
        </mapValue>
      </rowTest>
		  <type>amperage</type>
		  <sensorId>CURRENT_7</sensorId>
		  <value>
			  <mult>
				  <op><getOid>i5</getOid></op>
				  <op>0.1</op>
			  </mult>
		  </value>
		  <label>I 5</label>
		  <sensorSet>Current Sensors</sensorSet>
	  </numSensor>
	  
	  <numSensor ruleid="input_current_unbalanced">
      <rowTest>
        <mapValue mapid="delete_null_sensor_u16">
          <getOid default="-1">i_unbal</getOid>
        </mapValue>
      </rowTest>
		  <type>pctofcapacity</type>
		  <sensorId>CURRENT_UNBAL_1</sensorId>
		  <value>
			  <mult>
				  <op><getOid>i_unbal</getOid></op>
				  <op>0.1</op>
			  </mult>
		  </value>
		  <label>I unbal</label>
		  <sensorSet>Current Sensors</sensorSet>
	  </numSensor>
	  
	  <numSensor ruleid="input_current_iavgmn">
      <rowTest>
        <mapValue mapid="delete_null_sensor_u16">
          <getOid default="-1">iavgmn</getOid>
        </mapValue>
      </rowTest>
		  <type>amperage</type>
		  <sensorId>CURRENT_8</sensorId>
		  <value>
			  <mult>
				  <op><getOid>iavgmn</getOid></op>
				  <op>0.1</op>
			  </mult>
		  </value>
		  <label>I avg mn</label>
		  <sensorSet>Current Sensors</sensorSet>
	  </numSensor>
	 
	  <numSensor ruleid="input_current_iavgmx">
      <rowTest>
        <mapValue mapid="delete_null_sensor_u16">
          <getOid default="-1">iavgmx</getOid>
        </mapValue>
      </rowTest>
		  <type>amperage</type>
		  <sensorId>CURRENT_9</sensorId>
		  <value>
			  <mult>
				  <op><getOid>iavgmx</getOid></op>
				  <op>0.1</op>
			  </mult>
		  </value>
		  <label>I avg mx</label>
		  <sensorSet>Current Sensors</sensorSet>
	  </numSensor>
	  	 
	  <numSensor ruleid="input_current_iavgmean">
      <rowTest>
        <mapValue mapid="delete_null_sensor_u16">
          <getOid default="-1">iavgmean</getOid>
        </mapValue>
      </rowTest>
		  <type>amperage</type>
		  <sensorId>CURRENT_10</sensorId>
		  <value>
			  <mult>
				  <op><getOid>iavgmean</getOid></op>
				  <op>0.1</op>
			  </mult>
		  </value>
		  <label>I avg mean</label>
		  <sensorSet>Current Sensors</sensorSet>
	  </numSensor>
	  
	  <numSensor ruleid="input_current_ia_demand">
      <rowTest>
        <mapValue mapid="delete_null_sensor_u16">
          <getOid default="-1">iademand</getOid>
        </mapValue>
      </rowTest>
		  <type>amperage</type>
		  <sensorId>CURRENT_DEMAND_1</sensorId>
		  <value>
			  <mult>
				  <op><getOid>iademand</getOid></op>
				  <op>0.1</op>
			  </mult>
		  </value>
		  <label>I a Demand</label>
		  <sensorSet>Current Sensors</sensorSet>
	  </numSensor>
	  
	  <numSensor ruleid="input_current_ib_demand">
      <rowTest>
        <mapValue mapid="delete_null_sensor_u16">
          <getOid default="-1">ibdemand</getOid>
        </mapValue>
      </rowTest>
		  <type>amperage</type>
		  <sensorId>CURRENT_DEMAND_2</sensorId>
		  <value>
			  <mult>
				  <op><getOid>ibdemand</getOid></op>
				  <op>0.1</op>
			  </mult>
		  </value>
		  <label>I b Demand</label>
		  <sensorSet>Current Sensors</sensorSet>
	  </numSensor>
	  
	  <numSensor ruleid="input_current_ic_demand">
      <rowTest>
        <mapValue mapid="delete_null_sensor_u16">
          <getOid default="-1">icdemand</getOid>
        </mapValue>
      </rowTest>
		  <type>amperage</type>
		  <sensorId>CURRENT_DEMAND_3</sensorId>
		  <value>
			  <mult>
				  <op><getOid>icdemand</getOid></op>
				  <op>0.1</op>
			  </mult>
		  </value>
		  <label>I c Demand</label>
		  <sensorSet>Current Sensors</sensorSet>
	  </numSensor>
	  
	  <numSensor ruleid="input_current_ia_demand_pk">
      <rowTest>
        <mapValue mapid="delete_null_sensor_u16">
          <getOid default="-1">iademandpk</getOid>
        </mapValue>
      </rowTest>
		  <type>amperage</type>
		  <sensorId>CURRENT_DEMAND_PK_1</sensorId>
		  <value>
			  <mult>
				  <op><getOid>iademandpk</getOid></op>
				  <op>0.1</op>
			  </mult>
		  </value>
		  <label>I a Peak Demand</label>
		  <sensorSet>Current Sensors</sensorSet>
	  </numSensor>
	  
	  <numSensor ruleid="input_current_ib_demand_pk">
      <rowTest>
        <mapValue mapid="delete_null_sensor_u16">
          <getOid default="-1">ibdemandpk</getOid>
        </mapValue>
      </rowTest>
		  <type>amperage</type>
		  <sensorId>CURRENT_DEMAND_PK_2</sensorId>
		  <value>
			  <mult>
				  <op><getOid>ibdemandpk</getOid></op>
				  <op>0.1</op>
			  </mult>
		  </value>
		  <label>I b Peak Demand</label>
		  <sensorSet>Current Sensors</sensorSet>
	  </numSensor>
	  
	  <numSensor ruleid="input_current_ic_demand_pk">
      <rowTest>
        <mapValue mapid="delete_null_sensor_u16">
          <getOid default="-1">icdemandpk</getOid>
        </mapValue>
      </rowTest>
		  <type>amperage</type>
		  <sensorId>CURRENT_DEMAND_PK_3</sensorId>
		  <value>
			  <mult>
				  <op><getOid>icdemandpk</getOid></op>
				  <op>0.1</op>
			  </mult>
		  </value>
		  <label>I c Peak Demand</label>
		  <sensorSet>Current Sensors</sensorSet>
	  </numSensor>
	  
	  <numSensor ruleid="phase_rev">
      <rowTest>
        <mapValue mapid="delete_null_sensor_u16">
          <getOid default="-1">phaserev</getOid>
        </mapValue>
      </rowTest>
		  <type>num</type>
		  <sensorId>PHASE_REV_1</sensorId>
		  <value>
			  <mult>
				  <op><getOid>phaserev</getOid></op>
				  <op>0.1</op>
			  </mult>
		  </value>
		  <label>Phase rev</label>
		  <sensorSet>Current Sensors</sensorSet>
	  </numSensor>
	  
	  <numSensor ruleid="frequency">
      <rowTest>
        <mapValue mapid="delete_null_sensor_u16">
          <getOid default="-1">freq</getOid>
        </mapValue>
      </rowTest>
		  <type>frequency</type>
		  <sensorId>FREQUENCY_1</sensorId>
		  <value>
			  <mult>
				  <op><getOid>freq</getOid></op>
				  <op>0.1</op>
			  </mult>
		  </value>
		  <label>Freq</label>
		  <sensorSet>Frequency Sensors</sensorSet>
	  </numSensor>

	  <numSensor ruleid="frequencymn">
      <rowTest>
        <mapValue mapid="delete_null_sensor_u16">
          <getOid default="-1">freqmn</getOid>
        </mapValue>
      </rowTest>
		  <type>frequency</type>
		  <sensorId>FREQUENCY_2</sensorId>
		  <value>
			  <mult>
				  <op><getOid>freqmn</getOid></op>
				  <op>0.1</op>
			  </mult>
		  </value>
		  <label>Freq mn</label>
		  <sensorSet>Frequency Sensors</sensorSet>
	  </numSensor>
	 
	  <numSensor ruleid="frequencymx">
      <rowTest>
        <mapValue mapid="delete_null_sensor_u16">
          <getOid default="-1">freqmx</getOid>
        </mapValue>
      </rowTest>
		  <type>frequency</type>
		  <sensorId>FREQUENCY_3</sensorId>
		  <value>
			  <mult>
				  <op><getOid>freqmx</getOid></op>
				  <op>0.1</op>
			  </mult>
		  </value>
		  <label>Freq mx</label>
		  <sensorSet>Frequency Sensors</sensorSet>
	  </numSensor>	
	 
	  <numSensor ruleid="frequencymean">
      <rowTest>
        <mapValue mapid="delete_null_sensor_u16">
          <getOid default="-1">freqmean</getOid>
        </mapValue>
      </rowTest>
		  <type>frequency</type>
		  <sensorId>FREQUENCY_4</sensorId>
		  <value>
			  <mult>
				  <op><getOid>freqmean</getOid></op>
				  <op>0.1</op>
			  </mult>
		  </value>
		  <label>Freq mean</label>
		  <sensorSet>Frequency Sensors</sensorSet>
	  </numSensor>	    
	 
	  <numSensor ruleid="powerfactor_sign_total_pct">
      <rowTest>
        <mapValue mapid="delete_null_sensor_i16">
          <getOid default="-1">pf_sign_total_pct</getOid>
        </mapValue>
      </rowTest>
		  <type>pctofcapacity</type>
		  <sensorId>TOTAL_POWER_FACTOR_PCT_2</sensorId>
		  <value>
			  <mult>
				  <op><getOid>pf_sign_total_pct</getOid></op>
				  <op>0.01</op>
			  </mult>
		  </value>
		  <valueInc>0.01</valueInc>
		  <label>PF sign tot pct</label>
		  <sensorSet>Power Factor Sensors</sensorSet>
	  </numSensor>

	  <numSensor ruleid="powerfactor_sign_a_pct">
      <rowTest>
        <mapValue mapid="delete_null_sensor_i16">
          <getOid default="-1">pf_sign_a_pct</getOid>
        </mapValue>
      </rowTest>
		  <type>pctofcapacity</type>
		  <sensorId>POWER_FACTOR_PCT_1</sensorId>
		  <value>
			  <mult>
				  <op><getOid>pf_sign_a_pct</getOid></op>
				  <op>0.01</op>
			  </mult>
		  </value>
		  <valueInc>0.01</valueInc>
		  <label>PF sign a pct</label>
		  <sensorSet>Power Factor Sensors</sensorSet>
	  </numSensor>
	
	  <numSensor ruleid="powerfactor_sign_b_pct">
      <rowTest>
        <mapValue mapid="delete_null_sensor_i16">
          <getOid default="-1">pf_sign_b_pct</getOid>
        </mapValue>
      </rowTest>
		  <type>pctofcapacity</type>
		  <sensorId>POWER_FACTOR_PCT_2</sensorId>
		  <value>
			  <mult>
				  <op><getOid>pf_sign_b_pct</getOid></op>
				  <op>0.01</op>
			  </mult>
		  </value>
		  <valueInc>0.01</valueInc>
		  <label>PF sign b pct</label>
		  <sensorSet>Power Factor Sensors</sensorSet>
	  </numSensor>
	
	  <numSensor ruleid="powerfactor_sign_c_pct">
      <rowTest>
        <mapValue mapid="delete_null_sensor_i16">
          <getOid default="-1">pf_sign_c_pct</getOid>
        </mapValue>
      </rowTest>
		  <type>pctofcapacity</type>
		  <sensorId>POWER_FACTOR_PCT_3</sensorId>
		  <value>
			  <mult>
				  <op><getOid>pf_sign_c_pct</getOid></op>
				  <op>0.01</op>
			  </mult>
		  </value>
		  <valueInc>0.01</valueInc>
		  <label>PF sign c pct</label>
		  <sensorSet>Power Factor Sensors</sensorSet>
	  </numSensor>

	  <numSensor ruleid="voltage_ln_a">
      <rowTest>
        <mapValue mapid="delete_null_sensor_u32">
          <getOid default="-1">v_ln_a</getOid>
        </mapValue>
      </rowTest>
		  <type>voltage</type>
		  <sensorId>VOLTAGE_LN_1</sensorId>
		  <value>
			  <getOid>v_ln_a</getOid>
		  </value>
		  <label>Vln a</label>
		  <sensorSet>Voltage Sensors</sensorSet>
	  </numSensor>

	  <numSensor ruleid="voltage_ln_b">
      <rowTest>
        <mapValue mapid="delete_null_sensor_u32">
          <getOid default="-1">v_ln_b</getOid>
        </mapValue>
      </rowTest>
		  <type>voltage</type>
		  <sensorId>VOLTAGE_LN_2</sensorId>
		  <value>
			  <getOid>v_ln_b</getOid>
		  </value>
		  <label>Vln b</label>
		  <sensorSet>Voltage Sensors</sensorSet>
	  </numSensor>

	  <numSensor ruleid="voltage_ln_c">
      <rowTest>
        <mapValue mapid="delete_null_sensor_u32">
          <getOid default="-1">v_ln_c</getOid>
        </mapValue>
      </rowTest>
		  <type>voltage</type>
		  <sensorId>VOLTAGE_LN_3</sensorId>
		  <value>
			  <getOid>v_ln_c</getOid>
		  </value>
		  <label>Vln c</label>
		  <sensorSet>Voltage Sensors</sensorSet>
	  </numSensor>

	  <numSensor ruleid="voltage_ln_avg">
      <rowTest>
        <mapValue mapid="delete_null_sensor_u32">
          <getOid default="-1">v_ln_avg</getOid>
        </mapValue>
      </rowTest>
		  <type>voltage</type>
		  <sensorId>AVERAGE_VOLTAGE_LN_1</sensorId>
		  <value>
			  <getOid>v_ln_avg</getOid>
		  </value>
		  <label>Vln avg</label>
		  <sensorSet>Voltage Sensors</sensorSet>
	  </numSensor>

	  <numSensor ruleid="voltage_ll_ab">
      <rowTest>
        <mapValue mapid="delete_null_sensor_u32">
          <getOid default="-1">v_ll_ab</getOid>
        </mapValue>
      </rowTest>
		  <type>voltage</type>
		  <sensorId>VOLTAGE_LL_1</sensorId>
		  <value>
			  <getOid>v_ll_ab</getOid>
		  </value>
		  <label>Vll a-b</label>
		  <sensorSet>Voltage Sensors</sensorSet>
	  </numSensor>

	  <numSensor ruleid="voltage_ll_bc">
      <rowTest>
        <mapValue mapid="delete_null_sensor_u32">
          <getOid default="-1">v_ll_bc</getOid>
        </mapValue>
      </rowTest>
		  <type>voltage</type>
		  <sensorId>VOLTAGE_LL_2</sensorId>
		  <value>
			  <getOid>v_ll_bc</getOid>
		  </value>
		  <label>Vll b-c</label>
		  <sensorSet>Voltage Sensors</sensorSet>
	  </numSensor>

	  <numSensor ruleid="voltage_ll_ca">
      <rowTest>
        <mapValue mapid="delete_null_sensor_u32">
          <getOid default="-1">v_ll_ca</getOid>
        </mapValue>
      </rowTest>
		  <type>voltage</type>
		  <sensorId>VOLTAGE_LL_3</sensorId>
		  <value>
			  <getOid>v_ll_ca</getOid>
		  </value>
		  <label>Vll c-a</label>
		  <sensorSet>Voltage Sensors</sensorSet>
	  </numSensor>
	
	  <numSensor ruleid="voltage_ll_avg">
      <rowTest>
        <mapValue mapid="delete_null_sensor_u32">
          <getOid default="-1">v_ll_avg</getOid>
        </mapValue>
      </rowTest>
		  <type>voltage</type>
		  <sensorId>AVERAGE_VOLTAGE_LL_1</sensorId>
		  <value>
			  <getOid>v_ll_avg</getOid>
		  </value>
		  <label>Vll avg</label>
		  <sensorSet>Voltage Sensors</sensorSet>
	  </numSensor>
	  
	  <numSensor ruleid="voltage_unbalanced">
      <rowTest>
        <mapValue mapid="delete_null_sensor_u16">
          <getOid default="-1">v_unbal</getOid>
        </mapValue>
      </rowTest>
  	  <type>pctofcapacity</type>
		  <sensorId>VOLTAGE_UNBAL_1</sensorId>
		  <value>
			  <mult>
				  <op><getOid>v_unbal</getOid></op>
				  <op>0.1</op>
			  </mult>
		  </value>
		  <label>V unbal</label>
		  <sensorSet>Voltage Sensors</sensorSet>
	  </numSensor>
	  
	  <numSensor ruleid="voltage_ln_average_max">
      <rowTest>
        <mapValue mapid="delete_null_sensor_u32">
          <getOid default="-1">vlnavgmx</getOid>
        </mapValue>
      </rowTest>
  	  <type>voltage</type>
		  <sensorId>AVERAGE_VOLTAGE_LN_2</sensorId>
		  <value>
				<getOid>vlnavgmx</getOid>
		  </value>
		  <label>Vln avg mx</label>
		  <sensorSet>Voltage Sensors</sensorSet>
	  </numSensor>
	  
	  <numSensor ruleid="voltage_ll_avg_max">
      <rowTest>
        <mapValue mapid="delete_null_sensor_u32">
          <getOid default="-1">vllavgmx</getOid>
        </mapValue>
      </rowTest>
  	  <type>voltage</type>
		  <sensorId>AVERAGE_VOLTAGE_LL_2</sensorId>
		  <value>
				  <getOid>vllavgmx</getOid>
		  </value>
		  <label>Vll avg mx</label>
		  <sensorSet>Voltage Sensors</sensorSet>
	  </numSensor>
	  
	  <numSensor ruleid="voltage_ll_avg_mean">
      <rowTest>
        <mapValue mapid="delete_null_sensor_u32">
          <getOid default="-1">vllavgmean</getOid>
        </mapValue>
      </rowTest>
  	  <type>voltage</type>
		  <sensorId>AVERAGE_VOLTAGE_LL_3</sensorId>
		  <value>
		     <getOid>vllavgmean</getOid>
		  </value>
		  <label>Vll avg mean</label>
		  <sensorSet>Voltage Sensors</sensorSet>
	  </numSensor>	  
	  
	  <numSensor ruleid="kwh_del">
      <rowTest>
        <mapValue mapid="delete_null_sensor_i32">
          <getOid default="-1">kwhdel</getOid>
        </mapValue>
      </rowTest>
		  <type>num/kwatthr</type>
		  <sensorId>TOTAL_ENERGY_DEL_KWH_1</sensorId>
		  <value>
				  <getOid>kwhdel</getOid>
		  </value>
		  <label>kWh del</label>
		  <sensorSet>Other Sensors</sensorSet>
	  </numSensor>
  
    <numSensor ruleid="kwh_rec">
      <rowTest>
        <mapValue mapid="delete_null_sensor_i32">
          <getOid default="-1">kwhrec</getOid>
        </mapValue>
      </rowTest>
		  <type>num/kwatthr</type>
		  <sensorId>TOTAL_ENERGY_REC_KWH_1</sensorId>
		  <value>
				  <getOid>kwhrec</getOid>
		  </value>
		  <label>kWh rec</label>
		  <sensorSet>Other Sensors</sensorSet>
	  </numSensor>
	
	  <numSensor ruleid="kvarh_del">
      <rowTest>
        <mapValue mapid="delete_null_sensor_i32">
          <getOid default="-1">kvarhdel</getOid>
        </mapValue>
      </rowTest>
		  <type>num/kVARhr</type>
		  <sensorId>TOTAL_ENERGY_DEL_KVARH_1</sensorId>
		  <value>
				  <getOid>kvarhdel</getOid>
		  </value>
		  <label>kVARh del</label>
		  <sensorSet>Other Sensors</sensorSet>
	  </numSensor>
	
	  <numSensor ruleid="kvarh_rec">
      <rowTest>
        <mapValue mapid="delete_null_sensor_i32">
          <getOid default="-1">kvarhrec</getOid>
        </mapValue>
      </rowTest>
		  <type>num/kVARhr</type>
		  <sensorId>TOTAL_ENERGY_REC_KVARH_1</sensorId>
		  <value>
				  <getOid>kvarhrec</getOid>
		  </value>
		  <label>kVARh rec</label>
		  <sensorSet>Other Sensors</sensorSet>
	  </numSensor>
	
	  <numSensor ruleid="kvah_del_rec">
      <rowTest>
        <mapValue mapid="delete_null_sensor_i32">
          <getOid default="-1">kvahdelrec</getOid>
        </mapValue>
      </rowTest>
		  <type>num/kVAhr</type>
		  <sensorId>TOTAL_ENERGY_DEL_REC_KVAH_1</sensorId>
		  <value>
				  <getOid>kvahdelrec</getOid>
		  </value>
		  <label>kVAh del+rec</label>
		  <sensorSet>Other Sensors</sensorSet>
	  </numSensor>
	  
	  <numSensor ruleid="kwh_del_rec_tot">
      <rowTest>
        <mapValue mapid="delete_null_sensor_i32">
          <getOid default="-1">kwhdelrectot</getOid>
        </mapValue>
      </rowTest>
		  <type>num/kwatthr</type>
		  <sensorId>TOTAL_ENERGY_KWH_1</sensorId>
		  <value>
				  <getOid>kwhdelrectot</getOid>
		  </value>
		  <label>kWh del+rec</label>
		  <sensorSet>Other Sensors</sensorSet>
	  </numSensor>
	  
	  <numSensor ruleid="kwh_del_rec_net">
      <rowTest>
        <mapValue mapid="delete_null_sensor_i32">
          <getOid default="-1">kwhdelrecnet</getOid>
        </mapValue>
      </rowTest>
		  <type>num/kwatthr</type>
		  <sensorId>TOTAL_ENERGY_KWH_2</sensorId>
		  <value>
				  <getOid>kwhdelrecnet</getOid>
		  </value>
		  <label>kWh del-rec</label>
		  <sensorSet>Other Sensors</sensorSet>
	  </numSensor>
	 
	  <numSensor ruleid="v1_thd_mx">
      <rowTest>
        <mapValue mapid="delete_null_sensor_i16">
          <getOid default="-1">v1thdmx</getOid>
        </mapValue>
      </rowTest>
		  <type>pctofcapacity</type>
		  <sensorId>VOLTAGE_THD_1</sensorId>
		  <value>
		  <mult>
				  <op><getOid>v1thdmx</getOid></op>
				  <op>.01</op>
				  </mult>
		  </value>
		  <label>V1 THD mx</label>
		  <sensorSet>Voltage Harmonics Sensors</sensorSet>
	  </numSensor>
	 
	  <numSensor ruleid="v2_thd_mx">
      <rowTest>
        <mapValue mapid="delete_null_sensor_i16">
          <getOid default="-1">v2thdmx</getOid>
        </mapValue>
      </rowTest>
		  <type>pctofcapacity</type>
		  <sensorId>VOLTAGE_THD_2</sensorId>
		  <value>
		  <mult>
				  <op><getOid>v2thdmx</getOid></op>
				  <op>.01</op>
				  </mult>
		  </value>
		  <label>V2 THD mx</label>
		  <sensorSet>Voltage Harmonics Sensors</sensorSet>
	  </numSensor>
	  
	  <numSensor ruleid="v3_thd_mx">
      <rowTest>
        <mapValue mapid="delete_null_sensor_i16">
          <getOid default="-1">v3thdmx</getOid>
        </mapValue>
      </rowTest>
		  <type>pctofcapacity</type>
		  <sensorId>VOLTAGE_THD_3</sensorId>
		  <value>
		  <mult>
				  <op><getOid>v3thdmx</getOid></op>
				  <op>.01</op>
				  </mult>
		  </value>
		  <label>V3 THD mx</label>
		  <sensorSet>Voltage Harmonics Sensors</sensorSet>
	  </numSensor>	  	
	  
	  <!-- Current Harmonics Sensors -->
	  <numSensor ruleid="i1_thd_mx">
      <rowTest>
        <mapValue mapid="delete_null_sensor_i16">
          <getOid default="-1">i1thdmx</getOid>
        </mapValue>
      </rowTest>
		  <type>pctofcapacity</type>
		  <sensorId>CURRENT_THD_1</sensorId>
		  <value>
		  <mult>
				  <op><getOid>i1thdmx</getOid></op>
				  <op>.01</op>
				  </mult>
		  </value>
		  <label>I1 THD mx</label>
		  <sensorSet>Current Harmonics Sensors</sensorSet>
	  </numSensor>	 
	
	  <numSensor ruleid="i2_thd_mx">
      <rowTest>
        <mapValue mapid="delete_null_sensor_i16">
          <getOid default="-1">i2thdmx</getOid>
        </mapValue>
      </rowTest>
		  <type>pctofcapacity</type>
		  <sensorId>CURRENT_THD_2</sensorId>
		  <value>
		  <mult>
				  <op><getOid>i2thdmx</getOid></op>
				  <op>.01</op>
				  </mult>
		  </value>
		  <label>I2 THD mx</label>
		  <sensorSet>Current Harmonics Sensors</sensorSet>
	  </numSensor>	
	
	  <numSensor ruleid="i3_thd_mx">
      <rowTest>
        <mapValue mapid="delete_null_sensor_i16">
          <getOid default="-1">i3thdmx</getOid>
        </mapValue>
      </rowTest>
		  <type>pctofcapacity</type>
		  <sensorId>CURRENT_THD_3</sensorId>
		  <value>
		  <mult>
				  <op><getOid>i3thdmx</getOid></op>
				  <op>.01</op>
				  </mult>
		  </value>
		  <label>I3 THD mx</label>
		  <sensorSet>Current Harmonics Sensors</sensorSet>
	  </numSensor>	   
	
	  <numSensor ruleid="i1_k_factor">
      <rowTest>
        <mapValue mapid="delete_null_sensor_i16">
          <getOid default="-1">i1kfactor</getOid>
        </mapValue>
      </rowTest>
		  <type>num</type>
		  <sensorId>CURRENT_K_FACTOR_1</sensorId>
		  <value>
		  <mult>
				  <op><getOid>i1kfactor</getOid></op>
				  <op>.01</op>
				  </mult>
		  </value>
		  <label>I1 K Factor</label>
		  <sensorSet>Current Harmonics Sensors</sensorSet>
	  </numSensor>	
	
	  <numSensor ruleid="i2_k_factor">
      <rowTest>
        <mapValue mapid="delete_null_sensor_i16">
          <getOid default="-1">i2kfactor</getOid>
        </mapValue>
      </rowTest>
		  <type>num</type>
		  <sensorId>CURRENT_K_FACTOR_2</sensorId>
		  <value>
		  <mult>
				  <op><getOid>i2kfactor</getOid></op>
				  <op>.01</op>
				  </mult>
		  </value>
		  <label>I2 K Factor</label>
		  <sensorSet>Current Harmonics Sensors</sensorSet>
	  </numSensor>	 
	
	  <numSensor ruleid="i3_k_factor">
      <rowTest>
        <mapValue mapid="delete_null_sensor_i16">
          <getOid default="-1">i3kfactor</getOid>
        </mapValue>
      </rowTest>
		  <type>num</type>
		  <sensorId>CURRENT_K_FACTOR_3</sensorId>
		  <value>
		  <mult>
				  <op><getOid>i3kfactor</getOid></op>
				  <op>.01</op>
				  </mult>
		  </value>
		  <label>I3 K Factor</label>
		  <sensorSet>Current Harmonics Sensors</sensorSet>
	  </numSensor>	  
	
	  <numSensor ruleid="i1_crest_factor">
      <rowTest>
        <mapValue mapid="delete_null_sensor_i16">
          <getOid default="-1">i1crestfactor</getOid>
        </mapValue>
      </rowTest>
		  <type>num</type>
		  <sensorId>CURRENT_CREST_FACTOR_1</sensorId>
		  <value>
		  <mult>
				  <op><getOid>i1crestfactor</getOid></op>
				  <op>.01</op>
				  </mult>
		  </value>
		  <label>I1 Crest Factor</label>
		  <sensorSet>Current Harmonics Sensors</sensorSet>
	  </numSensor>	
	
	  <numSensor ruleid="i2_crest_factor">
      <rowTest>
        <mapValue mapid="delete_null_sensor_i16">
          <getOid default="-1">i2crestfactor</getOid>
        </mapValue>
      </rowTest>
		  <type>num</type>
		  <sensorId>CURRENT_CREST_FACTOR_2</sensorId>
		  <value>
		  <mult>
				  <op><getOid>i2crestfactor</getOid></op>
				  <op>.01</op>
				  </mult>
		  </value>
		  <label>I2 Crest Factor</label>
		  <sensorSet>Current Harmonics Sensors</sensorSet>
	  </numSensor>	 
	
	  <numSensor ruleid="i3_crest_factor">
      <rowTest>
        <mapValue mapid="delete_null_sensor_i16">
          <getOid default="-1">i3crestfactor</getOid>
        </mapValue>
      </rowTest>
		  <type>num</type>
		  <sensorId>CURRENT_CREST_FACTOR_3</sensorId>
		  <value>
		  <mult>
				  <op><getOid>i3crestfactor</getOid></op>
				  <op>.01</op>
				  </mult>
		  </value>
		  <label>I3 Crest Factor</label>
		  <sensorSet>Current Harmonics Sensors</sensorSet>
	  </numSensor>	          

    <!-- Modbus Slave Module is an add-on to the power meter -->
    <!-- Configurable as to what registers it maps to -->
    <!-- Can be used for add-ons with different purposes-->
    <!-- This DDF is setup to expect an I/O module add-on with 16 discrete inputs mapped to the specified regs -->
    <!-- If registers are not mapped, value should be FFFF -->
    <stateSensor ruleid="slave_module1_input" index="slave_module1_input">
      <rowTest>
        <mapValue mapid="delete_null_sensor2">
          <getRowOid default="65535">slave_module1_input</getRowOid>
        </mapValue>
      </rowTest>
      <type>state</type>
      <sensorId>SLAVE_MODULE_1_INPUT_STATUS_<rowNumber/></sensorId>
      <value>
          <mapValue mapid="iostatus-vm"><getRowOid>slave_module1_input</getRowOid></mapValue>
      </value>
      <label>Slave Module Input Status<space/><formatNumber><add><op><rowNumber/></op><op>1</op></add></formatNumber></label>
      <enum>iostatus-em</enum>
      <sensorSet>Discrete Input Status Sensors</sensorSet>
    </stateSensor>

    <!-- I/O Status value map -->
    <valueMap ruleid="iostatus-vm">
      <valueIn>0</valueIn><valueOut>0</valueOut>
      <valueIn>1</valueIn><valueOut>1</valueOut>
      <valueIn>*</valueIn><valueOut>0</valueOut>
    </valueMap>

    <!-- I/O Status Enums -->
    <enumMap ruleid="iostatus-em">
      <label>Off</label>
      <label>On</label>
    </enumMap>

    <valueMap ruleid="delete_null_sensor_i32">
      <valueIn>-1</valueIn><valueOut>[false]</valueOut>
      <valueIn>*</valueIn><valueOut>[true]</valueOut>
    </valueMap>

    <valueMap ruleid="delete_null_sensor_i16">
      <valueIn>-1</valueIn><valueOut>[false]</valueOut>
      <valueIn>*</valueIn><valueOut>[true]</valueOut>
    </valueMap>

    <valueMap ruleid="delete_null_sensor_u32">
      <valueIn>4294967295</valueIn><valueOut>[false]</valueOut>
      <valueIn>-1</valueIn><valueOut>[false]</valueOut>
      <valueIn>*</valueIn><valueOut>[true]</valueOut>
    </valueMap>

    <valueMap ruleid="delete_null_sensor_u16">
      <valueIn>65535</valueIn><valueOut>[false]</valueOut>
      <valueIn>-1</valueIn><valueOut>[false]</valueOut>
      <valueIn>*</valueIn><valueOut>[true]</valueOut>
    </valueMap>

    <valueMap ruleid="delete_null_sensor2">
      <valueIn>0</valueIn><valueOut>[true]</valueOut>
      <valueIn>1</valueIn><valueOut>[true]</valueOut>
      <valueIn>*</valueIn><valueOut>[false]</valueOut>
    </valueMap>
  </device>

  <protocol>
	  <modbus>
      <!-- Modbus Slave Module is an add-on to the power meter -->
      <!-- Configurable as to what registers it maps to -->
      <!-- Can be used for add-ons with different purposes-->
      <!-- This DDF is setup to expect an I/O module add-on with 16 discrete inputs mapped to the specified regs -->
      <!-- If registers are not mapped, value should be FFFF -->
      <table_ref_id indexid="slave_module1_input">
        <entry num="1">slave_module1_input1</entry>
        <entry num="2">slave_module1_input2</entry>
        <entry num="3">slave_module1_input3</entry>
        <entry num="4">slave_module1_input4</entry>
        <entry num="5">slave_module1_input5</entry>
        <entry num="6">slave_module1_input6</entry>
        <entry num="7">slave_module1_input7</entry>
        <entry num="8">slave_module1_input8</entry>
        <entry num="9">slave_module1_input9</entry>
        <entry num="10">slave_module1_input10</entry>
        <entry num="11">slave_module1_input11</entry>
        <entry num="12">slave_module1_input12</entry>
        <entry num="13">slave_module1_input13</entry>
        <entry num="14">slave_module1_input14</entry>
        <entry num="15">slave_module1_input15</entry>
        <entry num="16">slave_module1_input16</entry>
        <entry num="17">slave_module1_input17</entry>
        <entry num="18">slave_module1_input18</entry>
        <entry num="19">slave_module1_input19</entry>
        <entry num="20">slave_module1_input20</entry>
        <entry num="21">slave_module1_input21</entry>
        <entry num="22">slave_module1_input22</entry>
        <entry num="23">slave_module1_input23</entry>
        <entry num="24">slave_module1_input24</entry>
        <entry num="25">slave_module1_input25</entry>
        <entry num="26">slave_module1_input26</entry>
        <entry num="27">slave_module1_input27</entry>
        <entry num="28">slave_module1_input28</entry>
        <entry num="29">slave_module1_input29</entry>
        <entry num="30">slave_module1_input30</entry>
        <entry num="31">slave_module1_input31</entry>
        <entry num="32">slave_module1_input32</entry>
      </table_ref_id>
      <value_ref_id valid="slave_module1_input1">
        <function>3</function>
        <start_addr>10</start_addr>
        <quantity>1</quantity>
        <type>uint_16</type>
      </value_ref_id>
      <value_ref_id valid="slave_module1_input2">
        <function>3</function>
        <start_addr>11</start_addr>
        <quantity>1</quantity>
        <type>uint_16</type>
      </value_ref_id>
      <value_ref_id valid="slave_module1_input3">
        <function>3</function>
        <start_addr>12</start_addr>
        <quantity>1</quantity>
        <type>uint_16</type>
      </value_ref_id>
      <value_ref_id valid="slave_module1_input4">
        <function>3</function>
        <start_addr>13</start_addr>
        <quantity>1</quantity>
        <type>uint_16</type>
      </value_ref_id>
      <value_ref_id valid="slave_module1_input5">
        <function>3</function>
        <start_addr>14</start_addr>
        <quantity>1</quantity>
        <type>uint_16</type>
      </value_ref_id>
      <value_ref_id valid="slave_module1_input6">
        <function>3</function>
        <start_addr>15</start_addr>
        <quantity>1</quantity>
        <type>uint_16</type>
      </value_ref_id>
      <value_ref_id valid="slave_module1_input7">
        <function>3</function>
        <start_addr>16</start_addr>
        <quantity>1</quantity>
        <type>uint_16</type>
      </value_ref_id>
      <value_ref_id valid="slave_module1_input8">
        <function>3</function>
        <start_addr>17</start_addr>
        <quantity>1</quantity>
        <type>uint_16</type>
      </value_ref_id>
      <value_ref_id valid="slave_module1_input9">
        <function>3</function>
        <start_addr>18</start_addr>
        <quantity>1</quantity>
        <type>uint_16</type>
      </value_ref_id>
      <value_ref_id valid="slave_module1_input10">
        <function>3</function>
        <start_addr>19</start_addr>
        <quantity>1</quantity>
        <type>uint_16</type>
      </value_ref_id>
      <value_ref_id valid="slave_module1_input11">
        <function>3</function>
        <start_addr>20</start_addr>
        <quantity>1</quantity>
        <type>uint_16</type>
      </value_ref_id>
      <value_ref_id valid="slave_module1_input12">
        <function>3</function>
        <start_addr>21</start_addr>
        <quantity>1</quantity>
        <type>uint_16</type>
      </value_ref_id>
      <value_ref_id valid="slave_module1_input13">
        <function>3</function>
        <start_addr>22</start_addr>
        <quantity>1</quantity>
        <type>uint_16</type>
      </value_ref_id>
      <value_ref_id valid="slave_module1_input14">
        <function>3</function>
        <start_addr>23</start_addr>
        <quantity>1</quantity>
        <type>uint_16</type>
      </value_ref_id>
      <value_ref_id valid="slave_module1_input15">
        <function>3</function>
        <start_addr>24</start_addr>
        <quantity>1</quantity>
        <type>uint_16</type>
      </value_ref_id>
      <value_ref_id valid="slave_module1_input16">
        <function>3</function>
        <start_addr>25</start_addr>
        <quantity>1</quantity>
        <type>uint_16</type>
      </value_ref_id>

      <value_ref_id valid="slave_module1_input17">
        <function>3</function>
        <start_addr>26</start_addr>
        <quantity>1</quantity>
        <type>uint_16</type>
      </value_ref_id>
      <value_ref_id valid="slave_module1_input18">
        <function>3</function>
        <start_addr>27</start_addr>
        <quantity>1</quantity>
        <type>uint_16</type>
      </value_ref_id>
      <value_ref_id valid="slave_module1_input19">
        <function>3</function>
        <start_addr>28</start_addr>
        <quantity>1</quantity>
        <type>uint_16</type>
      </value_ref_id>
      <value_ref_id valid="slave_module1_input20">
        <function>3</function>
        <start_addr>29</start_addr>
        <quantity>1</quantity>
        <type>uint_16</type>
      </value_ref_id>
      <value_ref_id valid="slave_module1_input21">
        <function>3</function>
        <start_addr>30</start_addr>
        <quantity>1</quantity>
        <type>uint_16</type>
      </value_ref_id>
      <value_ref_id valid="slave_module1_input22">
        <function>3</function>
        <start_addr>31</start_addr>
        <quantity>1</quantity>
        <type>uint_16</type>
      </value_ref_id>
      <value_ref_id valid="slave_module1_input23">
        <function>3</function>
        <start_addr>32</start_addr>
        <quantity>1</quantity>
        <type>uint_16</type>
      </value_ref_id>
      <value_ref_id valid="slave_module1_input24">
        <function>3</function>
        <start_addr>33</start_addr>
        <quantity>1</quantity>
        <type>uint_16</type>
      </value_ref_id>
      <value_ref_id valid="slave_module1_input25">
        <function>3</function>
        <start_addr>34</start_addr>
        <quantity>1</quantity>
        <type>uint_16</type>
      </value_ref_id>
      <value_ref_id valid="slave_module1_input26">
        <function>3</function>
        <start_addr>35</start_addr>
        <quantity>1</quantity>
        <type>uint_16</type>
      </value_ref_id>
      <value_ref_id valid="slave_module1_input27">
        <function>3</function>
        <start_addr>36</start_addr>
        <quantity>1</quantity>
        <type>uint_16</type>
      </value_ref_id>
      <value_ref_id valid="slave_module1_input28">
        <function>3</function>
        <start_addr>37</start_addr>
        <quantity>1</quantity>
        <type>uint_16</type>
      </value_ref_id>
      <value_ref_id valid="slave_module1_input29">
        <function>3</function>
        <start_addr>38</start_addr>
        <quantity>1</quantity>
        <type>uint_16</type>
      </value_ref_id>
      <value_ref_id valid="slave_module1_input30">
        <function>3</function>
        <start_addr>39</start_addr>
        <quantity>1</quantity>
        <type>uint_16</type>
      </value_ref_id>
      <value_ref_id valid="slave_module1_input31">
        <function>3</function>
        <start_addr>40</start_addr>
        <quantity>1</quantity>
        <type>uint_16</type>
      </value_ref_id>
      <value_ref_id valid="slave_module1_input32">
        <function>3</function>
        <start_addr>41</start_addr>
        <quantity>1</quantity>
        <type>uint_16</type>
      </value_ref_id>
		  <!-- these 6 are custom; not part of std reg map -->
      <value_ref_id valid="iademand">
        <function>3</function>
        <start_addr>49</start_addr>
        <quantity>1</quantity>
        <type>uint_16</type>
      </value_ref_id>
      <value_ref_id valid="ibdemand">
        <function>3</function>
        <start_addr>50</start_addr>
        <quantity>1</quantity>
        <type>uint_16</type>
      </value_ref_id>
      <value_ref_id valid="icdemand">
        <function>3</function>
        <start_addr>51</start_addr>
        <quantity>1</quantity>
        <type>uint_16</type>
      </value_ref_id>
      <value_ref_id valid="iademandpk">
        <function>3</function>
        <start_addr>52</start_addr>
        <quantity>1</quantity>
        <type>uint_16</type>
      </value_ref_id>
      <value_ref_id valid="ibdemandpk">
        <function>3</function>
        <start_addr>53</start_addr>
        <quantity>1</quantity>
        <type>uint_16</type>
      </value_ref_id>
      <value_ref_id valid="icdemandpk">
        <function>3</function>
        <start_addr>54</start_addr>
        <quantity>1</quantity>
        <type>uint_16</type>
      </value_ref_id>

		  <!-- Current sensors -->
		  <value_ref_id valid="ia">
			  <function>3</function>
			  <start_addr>149</start_addr>
			  <quantity>1</quantity>
			  <type>uint_16</type>
		  </value_ref_id>
		  <value_ref_id valid="ib">
			  <function>3</function>
			  <start_addr>150</start_addr>
			  <quantity>1</quantity>
			  <type>uint_16</type>
		  </value_ref_id>
		  <value_ref_id valid="ic">
			  <function>3</function>
			  <start_addr>151</start_addr>
			  <quantity>1</quantity>
			  <type>uint_16</type>
		  </value_ref_id>
		  <value_ref_id valid="i4">
			  <function>3</function>
			  <start_addr>152</start_addr>
			  <quantity>1</quantity>
			  <type>uint_16</type>
		  </value_ref_id>
		  <value_ref_id valid="i5">
			  <function>3</function>
			  <start_addr>153</start_addr>
			  <quantity>1</quantity>
			  <type>uint_16</type>
		  </value_ref_id>
		  <value_ref_id valid="iavg">
			  <function>3</function>
			  <start_addr>154</start_addr>
			  <quantity>1</quantity>
			  <type>uint_16</type>
		  </value_ref_id>
		  <value_ref_id valid="iavgmn">
			  <function>3</function>
			  <start_addr>155</start_addr>
			  <quantity>1</quantity>
			  <type>uint_16</type>
		  </value_ref_id>
		  <value_ref_id valid="iavgmx">
			  <function>3</function>
			  <start_addr>156</start_addr>
			  <quantity>1</quantity>
			  <type>uint_16</type>
		  </value_ref_id>
		  <value_ref_id valid="iavgmean">
			  <function>3</function>
			  <start_addr>157</start_addr>
			  <quantity>1</quantity>
			  <type>uint_16</type>
		  </value_ref_id>
		  <value_ref_id valid="v_unbal">
			  <function>3</function>
			  <start_addr>162</start_addr>
			  <quantity>1</quantity>
			  <type>uint_16</type>
		  </value_ref_id>
		  <value_ref_id valid="i_unbal">
			  <function>3</function>
			  <start_addr>163</start_addr>
			  <quantity>1</quantity>
			  <type>uint_16</type>
		  </value_ref_id>
		  <value_ref_id valid="phaserev">
			  <function>3</function>
			  <start_addr>164</start_addr>
			  <quantity>1</quantity>
			  <type>uint_16</type>
		  </value_ref_id>

		  <!-- Power Factor Sensors -->
		  <value_ref_id valid="pf_sign_total_pct">
			  <function>3</function>
			  <start_addr>264</start_addr>
			  <quantity>1</quantity>
			  <type>int_16</type>
		  </value_ref_id>
		  <value_ref_id valid="pf_sign_a_pct">
			  <function>3</function>
			  <start_addr>261</start_addr>
			  <quantity>1</quantity>
			  <type>int_16</type>
		  </value_ref_id>
		  <value_ref_id valid="pf_sign_b_pct">
			  <function>3</function>
			  <start_addr>262</start_addr>
			  <quantity>1</quantity>
			  <type>int_16</type>
		  </value_ref_id>
		  <value_ref_id valid="pf_sign_c_pct">
			  <function>3</function>
			  <start_addr>263</start_addr>
			  <quantity>1</quantity>
			  <type>int_16</type>
		  </value_ref_id>

		  <!-- Voltage Sensors -->
		  <value_ref_id valid="v_ln_a">
			  <function>3</function>
			  <start_addr>165</start_addr>
			  <quantity>2</quantity>
			  <type>uint_32</type>
		  </value_ref_id>
		  <value_ref_id valid="v_ln_b">
			  <function>3</function>
			  <start_addr>167</start_addr>
			  <quantity>2</quantity>
			  <type>uint_32</type>
		  </value_ref_id>
		  <value_ref_id valid="v_ln_c">
			  <function>3</function>
			  <start_addr>169</start_addr>
			  <quantity>2</quantity>
			  <type>uint_32</type>
		  </value_ref_id>
		  <value_ref_id valid="v_ln_avg">
			  <function>3</function>
			  <start_addr>171</start_addr>
			  <quantity>2</quantity>
			  <type>uint_32</type>
		  </value_ref_id>
		  <value_ref_id valid="vlnavgmx">
			  <function>3</function>
			  <start_addr>173</start_addr>
			  <quantity>2</quantity>
			  <type>uint_32</type>
		  </value_ref_id>
		  <value_ref_id valid="v_ll_ab">
			  <function>3</function>
			  <start_addr>177</start_addr>
			  <quantity>2</quantity>
			  <type>uint_32</type>
		  </value_ref_id>
		  <value_ref_id valid="v_ll_bc">
			  <function>3</function>
			  <start_addr>179</start_addr>
			  <quantity>2</quantity>
			  <type>uint_32</type>
		  </value_ref_id>
		  <value_ref_id valid="v_ll_ca">
			  <function>3</function>
			  <start_addr>181</start_addr>
			  <quantity>2</quantity>
			  <type>uint_32</type>
		  </value_ref_id>
		  <value_ref_id valid="v_ll_avg">
			  <function>3</function>
			  <start_addr>183</start_addr>
			  <quantity>2</quantity>
			  <type>uint_32</type>
		  </value_ref_id>
		  <value_ref_id valid="vllavgmx">
			  <function>3</function>
			  <start_addr>185</start_addr>
			  <quantity>2</quantity>
			  <type>uint_32</type>
		  </value_ref_id>
		  <value_ref_id valid="vllavgmean">
			  <function>3</function>
			  <start_addr>187</start_addr>
			  <quantity>2</quantity>
			  <type>uint_32</type>
		  </value_ref_id>

 		  <!-- Power Sensors -->
		  <value_ref_id valid="kwa">
			  <function>3</function>
			  <start_addr>197</start_addr>
			  <quantity>2</quantity>
			  <type>int_32</type>
		  </value_ref_id>
		  <value_ref_id valid="kwb">
			  <function>3</function>
			  <start_addr>199</start_addr>
			  <quantity>2</quantity>
			  <type>int_32</type>
		  </value_ref_id>
		  <value_ref_id valid="kwc">
			  <function>3</function>
			  <start_addr>201</start_addr>
			  <quantity>2</quantity>
			  <type>int_32</type>
		  </value_ref_id>
		  <value_ref_id valid="kwtot">
			  <function>3</function>
			  <start_addr>203</start_addr>
			  <quantity>2</quantity>
			  <type>int_32</type>
		  </value_ref_id>
		  <value_ref_id valid="kwtotmx">
			  <function>3</function>
			  <start_addr>205</start_addr>
			  <quantity>2</quantity>
			  <type>int_32</type>
		  </value_ref_id>		  
      <value_ref_id valid="kvara">
			  <function>3</function>
			  <start_addr>207</start_addr>
			  <quantity>2</quantity>
			  <type>int_32</type>
		  </value_ref_id>
		  <value_ref_id valid="kvarb">
			  <function>3</function>
			  <start_addr>209</start_addr>
			  <quantity>2</quantity>
			  <type>int_32</type>
		  </value_ref_id>
		  <value_ref_id valid="kvarc">
			  <function>3</function>
			  <start_addr>211</start_addr>
			  <quantity>2</quantity>
			  <type>int_32</type>
		  </value_ref_id>
		  <value_ref_id valid="kvartot">
			  <function>3</function>
			  <start_addr>213</start_addr>
			  <quantity>2</quantity>
			  <type>int_32</type>
		  </value_ref_id>
		  <value_ref_id valid="kvartotmx">
			  <function>3</function>
			  <start_addr>215</start_addr>
			  <quantity>2</quantity>
			  <type>int_32</type>
		  </value_ref_id>
		  <value_ref_id valid="kvaa">
			  <function>3</function>
			  <start_addr>217</start_addr>
			  <quantity>2</quantity>
			  <type>int_32</type>
		  </value_ref_id>
		  <value_ref_id valid="kvab">
			  <function>3</function>
			  <start_addr>219</start_addr>
			  <quantity>2</quantity>
			  <type>int_32</type>
		  </value_ref_id>
		  <value_ref_id valid="kvac">
			  <function>3</function>
			  <start_addr>221</start_addr>
			  <quantity>2</quantity>
			  <type>int_32</type>
		  </value_ref_id>
		  <value_ref_id valid="kvatot">
			  <function>3</function>
			  <start_addr>223</start_addr>
			  <quantity>2</quantity>
			  <type>int_32</type>
		  </value_ref_id>
		  <value_ref_id valid="kvatotmx">
			  <function>3</function>
			  <start_addr>225</start_addr>
			  <quantity>2</quantity>
			  <type>int_32</type>
		  </value_ref_id>
		  
		  <!-- Other Sensors -->
		  <value_ref_id valid="kwhdel">
			  <function>3</function>
			  <start_addr>229</start_addr>
			  <quantity>2</quantity>
			  <type>int_32</type>
		  </value_ref_id>
		  <value_ref_id valid="kwhrec">
			  <function>3</function>
			  <start_addr>231</start_addr>
			  <quantity>2</quantity>
			  <type>int_32</type>
		  </value_ref_id>
		  <value_ref_id valid="kvarhdel">
			  <function>3</function>
			  <start_addr>233</start_addr>
			  <quantity>2</quantity>
			  <type>int_32</type>
		  </value_ref_id>
		  <value_ref_id valid="kvarhrec">
			  <function>3</function>
			  <start_addr>235</start_addr>
			  <quantity>2</quantity>
			  <type>int_32</type>
		  </value_ref_id>
		  <value_ref_id valid="kvahdelrec">
			  <function>3</function>
			  <start_addr>237</start_addr>
			  <quantity>2</quantity>
			  <type>int_32</type>
		  </value_ref_id>
		  <!-- these 2 are custom; not part of std reg map -->
		  <value_ref_id valid="kwhdelrectot">
			  <function>3</function>
			  <start_addr>239</start_addr>
			  <quantity>2</quantity>
			  <type>int_32</type>
		  </value_ref_id>
		  <value_ref_id valid="kwhdelrecnet">
			  <function>3</function>
			  <start_addr>241</start_addr>
			  <quantity>2</quantity>
			  <type>int_32</type>
		  </value_ref_id>
		  
		  <!-- Voltage Harmonics Sensors -->
		  <value_ref_id valid="v1thdmx">
			  <function>3</function>
			  <start_addr>265</start_addr>
			  <quantity>1</quantity>
			  <type>int_16</type>
		  </value_ref_id>		
		  <value_ref_id valid="v2thdmx">
			  <function>3</function>
			  <start_addr>266</start_addr>
			  <quantity>1</quantity>
			  <type>int_16</type>
		  </value_ref_id>		  
		  <value_ref_id valid="v3thdmx">
			  <function>3</function>
			  <start_addr>267</start_addr>
			  <quantity>1</quantity>
			  <type>int_16</type>
		  </value_ref_id>		
		  
		  <!-- Current Harmonics Sensors -->
		  <value_ref_id valid="i1thdmx">
			  <function>3</function>
			  <start_addr>268</start_addr>
			  <quantity>1</quantity>
			  <type>int_16</type>
		  </value_ref_id>	
		  <value_ref_id valid="i2thdmx">
			  <function>3</function>
			  <start_addr>269</start_addr>
			  <quantity>1</quantity>
			  <type>int_16</type>
		  </value_ref_id>	
		  <value_ref_id valid="i3thdmx">
			  <function>3</function>
			  <start_addr>270</start_addr>
			  <quantity>1</quantity>
			  <type>int_16</type>
		  </value_ref_id>		
		  <value_ref_id valid="i1kfactor">
			  <function>3</function>
			  <start_addr>271</start_addr>
			  <quantity>1</quantity>
			  <type>int_16</type>
		  </value_ref_id>	
		  <value_ref_id valid="i2kfactor">
			  <function>3</function>
			  <start_addr>272</start_addr>
			  <quantity>1</quantity>
			  <type>int_16</type>
		  </value_ref_id>			  
		  <value_ref_id valid="i3kfactor">
			  <function>3</function>
			  <start_addr>273</start_addr>
			  <quantity>1</quantity>
			  <type>int_16</type>
		  </value_ref_id>	
		  <value_ref_id valid="i1crestfactor">
			  <function>3</function>
			  <start_addr>274</start_addr>
			  <quantity>1</quantity>
			  <type>int_16</type>
		  </value_ref_id>		
		  <value_ref_id valid="i2crestfactor">
			  <function>3</function>
			  <start_addr>275</start_addr>
			  <quantity>1</quantity>
			  <type>int_16</type>
		  </value_ref_id>		
		  <value_ref_id valid="i3crestfactor">
			  <function>3</function>
			  <start_addr>276</start_addr>
			  <quantity>1</quantity>
			  <type>int_16</type>
		  </value_ref_id>			    
		  		  
		  <!-- Frequency Sensors -->
		  <value_ref_id valid="freq">
			  <function>3</function>
			  <start_addr>158</start_addr>
			  <quantity>1</quantity>
			  <type>uint_16</type>
		  </value_ref_id>
		  <value_ref_id valid="freqmn">
			  <function>3</function>
			  <start_addr>159</start_addr>
			  <quantity>1</quantity>
			  <type>uint_16</type>
		  </value_ref_id>
		  <value_ref_id valid="freqmx">
			  <function>3</function>
			  <start_addr>160</start_addr>
			  <quantity>1</quantity>
			  <type>uint_16</type>
		  </value_ref_id>
		  <value_ref_id valid="freqmean">
			  <function>3</function>
			  <start_addr>161</start_addr>
			  <quantity>1</quantity>
			  <type>uint_16</type>
		  </value_ref_id>
		  <value_ref_id valid="firmware_version">
			  <function>3</function>
			  <start_addr>1900</start_addr>
			  <quantity>12</quantity>
			  <type>ascii</type>
		  </value_ref_id>
		  
      <packet>
        <function>3</function>
        <start_addr>10</start_addr>
        <quantity>32</quantity>
      </packet>
      <packet>
        <function>3</function>
        <start_addr>49</start_addr>
        <quantity>6</quantity>
      </packet>
		  <packet>
			  <function>3</function>
			  <start_addr>149</start_addr>
			  <quantity>40</quantity>
		  </packet>
		  <packet>
			  <function>3</function>
			  <start_addr>197</start_addr>
			  <quantity>30</quantity>
		  </packet>
		  <packet>
			  <function>3</function>
			  <start_addr>229</start_addr>
			  <quantity>14</quantity>
		  </packet>
		  <packet>
			  <function>3</function>
			  <start_addr>261</start_addr>
			  <quantity>16</quantity>
		  </packet>		  

		  		  		  		  			  
	  </modbus>
  </protocol>
</APC_DDF>
